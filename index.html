<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic SEO & GEO Architect v3.2</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&display=swap');
        
        body { font-family: 'Inter', sans-serif; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #c1c1c1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #a8a8a8; }
        
        .step-content { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .animate-spin { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-gray-50 h-screen overflow-hidden">
    <div id="root" class="h-full"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ICONS ---
        const Icons = {
            Zap: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>,
            Search: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>,
            Building: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><line x1="9" y1="22" x2="9" y2="22.01"></line><line x1="15" y1="22" x2="15" y2="22.01"></line><line x1="12" y1="22" x2="12" y2="22.01"></line><line x1="12" y1="18" x2="12" y2="18.01"></line><line x1="9" y1="18" x2="9" y2="18.01"></line><line x1="15" y1="18" x2="15" y2="18.01"></line><line x1="12" y1="14" x2="12" y2="14.01"></line><line x1="9" y1="14" x2="9" y2="14.01"></line><line x1="15" y1="14" x2="15" y2="14.01"></line><line x1="12" y1="10" x2="12" y2="10.01"></line><line x1="9" y1="10" x2="9" y2="10.01"></line><line x1="15" y1="10" x2="15" y2="10.01"></line><line x1="12" y1="6" x2="12" y2="6.01"></line><line x1="9" y1="6" x2="9" y2="6.01"></line><line x1="15" y1="6" x2="15" y2="6.01"></line></svg>,
            Globe: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>,
            Wrench: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>,
            PenTool: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 19l7-7 3 3-7 7-3-3z"/><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="M2 2l7.586 7.586"/><circle cx="11" cy="11" r="2"/></svg>,
            Code: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>,
            Brain: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 4.44-4A2.5 2.5 0 0 1 9.5 2Z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-4.44-4A2.5 2.5 0 0 0 14.5 2Z"/></svg>,
            Copy: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>,
            Check: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="20 6 9 17 4 12"/></svg>,
            ArrowRight: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>,
            ChevronDown: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>,
            Trash: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>,
            Plus: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>,
            ExternalLink: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>,
            Globe: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>,
            Activity: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>,
            MagicWand: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m19 2 2 2-2 2-2-2 2-2Z"/><path d="m5 16 6-6 7 7"/><path d="m12 13 1 1"/><path d="m8 21 2-2 2 2-2 2-2-2Z"/><path d="m1 21 2-2 2 2-2 2-2-2Z"/><path d="m1 5 2-2 2 2-2 2-2-2Z"/></svg>,
            RotateCcw: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>,
            Loader: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 12a9 9 0 1 1-6.219-8.56"/></svg>,
            Send: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
        };

        const { Copy, Check, FileText, Search, Zap, Cpu, MapPin, Users, Activity, Building, Book, ChevronDown, ArrowRight, Globe, Wrench, PenTool, Code, Brain, Link, Trash, Plus, ExternalLink, MagicWand, RotateCcw, Loader, Send } = Icons;

        // --- CONSTANTS ---
        const CONTINENTS = {
            "North America": ["United States", "Canada", "Mexico", "Antigua and Barbuda", "Bahamas", "Barbados", "Belize", "Costa Rica", "Cuba", "Dominica", "Dominican Republic", "El Salvador", "Grenada", "Guatemala", "Haiti", "Honduras", "Jamaica", "Nicaragua", "Panama", "Saint Kitts and Nevis", "Saint Lucia", "Saint Vincent and the Grenadines", "Trinidad and Tobago"],
            "South America": ["Argentina", "Bolivia", "Brazil", "Chile", "Colombia", "Ecuador", "Guyana", "Paraguay", "Peru", "Suriname", "Uruguay", "Venezuela"],
            "Europe": ["United Kingdom", "Germany", "France", "Italy", "Spain", "Netherlands", "Albania", "Andorra", "Austria", "Belarus", "Belgium", "Bosnia and Herzegovina", "Bulgaria", "Croatia", "Cyprus", "Czech Republic", "Denmark", "Estonia", "Finland", "Greece", "Hungary", "Iceland", "Ireland", "Kosovo", "Latvia", "Liechtenstein", "Lithuania", "Luxembourg", "Malta", "Moldova", "Monaco", "Montenegro", "North Macedonia", "Norway", "Poland", "Portugal", "Romania", "Russia", "San Marino", "Serbia", "Slovakia", "Slovenia", "Sweden", "Switzerland", "Ukraine", "Vatican City"],
            "Asia": ["China", "Japan", "India", "South Korea", "Singapore", "Taiwan", "Hong Kong", "Afghanistan", "Armenia", "Azerbaijan", "Bahrain", "Bangladesh", "Bhutan", "Brunei", "Cambodia", "Georgia", "Indonesia", "Iran", "Iraq", "Israel", "Jordan", "Kazakhstan", "Kuwait", "Kyrgyzstan", "Laos", "Lebanon", "Malaysia", "Maldives", "Mongolia", "Myanmar", "Nepal", "North Korea", "Oman", "Pakistan", "Palestine", "Philippines", "Qatar", "Saudi Arabia", "Sri Lanka", "Syria", "Tajikistan", "Thailand", "Timor-Leste", "Turkey", "Turkmenistan", "United Arab Emirates", "Uzbekistan", "Vietnam", "Yemen"],
            "Africa": ["South Africa", "Nigeria", "Egypt", "Kenya", "Algeria", "Angola", "Benin", "Botswana", "Burkina Faso", "Burundi", "Cabo Verde", "Cameroon", "Central African Republic", "Chad", "Comoros", "Congo (DRC)", "Congo (Republic)", "Cote d'Ivoire", "Djibouti", "Equatorial Guinea", "Eritrea", "Eswatini", "Ethiopia", "Gabon", "Gambia", "Ghana", "Guinea", "Guinea-Bissau", "Lesotho", "Liberia", "Libya", "Madagascar", "Malawi", "Mali", "Mauritania", "Mauritius", "Morocco", "Mozambique", "Namibia", "Niger", "Rwanda", "Sao Tome and Principe", "Senegal", "Seychelles", "Sierra Leone", "Somalia", "South Sudan", "Sudan", "Tanzania", "Togo", "Tunisia", "Uganda", "Zambia", "Zimbabwe"],
            "Oceania": ["Australia", "New Zealand", "Fiji", "Kiribati", "Marshall Islands", "Micronesia", "Nauru", "Palau", "Papua New Guinea", "Samoa", "Solomon Islands", "Tonga", "Tuvalu", "Vanuatu"]
        };

        const PRODUCT_CATEGORIES = {
            "Electronics": {
                "Mobile Accessories": ["USB Cable", "Power Bank", "Wall Charger", "Protective Case", "Screen Protector"],
                "Audio & Video": ["Headphones", "Bluetooth Speakers", "Home Theater", "Microphones"],
                "Computers": ["Laptops", "Tablets", "Monitors", "Keyboards", "Mice"],
                "Cameras": ["Digital Cameras", "Lenses", "Drones", "Action Cameras"],
                "Wearable Technology": ["Smartwatches", "Fitness Trackers", "VR Headsets"],
                "Home Appliances": ["Smart Plugs", "Smart Lights", "Security Cameras", "Robot Vacuums"]
            },
            "Home & Garden": {
                "Furniture": ["Living Room", "Bedroom", "Office", "Outdoor"],
                "Kitchen": ["Appliances", "Cookware", "Cutlery"],
                "Garden": ["Planters", "Tools", "Grills"],
                "Bedding & Mattresses": ["Pillows", "Bed Frames", "Mattress Toppers", "Sheets"],
                "Home Decor": ["Wall Art", "Rugs", "Lighting", "Mirrors"]
            },
            "Clothing & Accessories": {
                "Men's": ["T-Shirts", "Jackets", "Pants", "Activewear"],
                "Women's": ["Dresses", "Tops", "Skirts", "Activewear"],
                "Accessories": ["Watches", "Jewelry", "Sunglasses", "Bags"],
                "Footwear": ["Sneakers", "Boots", "Sandals", "Formal Shoes"],
                "Activewear": ["Workout Clothes", "Joggers", "Sports Bras"]
            },
            "Sports & Outdoors": {
                "Fitness": ["Yoga Mats", "Dumbbells", "Resistance Bands", "Treadmills"],
                "Cycling": ["Bikes", "Helmets", "Accessories"],
                "Camping": ["Tents", "Sleeping Bags", "Backpacks"],
                "Outdoor Adventure": ["Hiking Gear", "Climbing Equipment", "Fishing Rods"],
                "Water Sports": ["Kayaks", "Surfboards", "Paddleboards", "Swimwear"]
            },
            "Beauty & Personal Care": {
                "Skincare": ["Moisturizers", "Cleansers", "Serums"],
                "Haircare": ["Shampoo", "Conditioner", "Styling Tools"],
                "Makeup": ["Face", "Eyes", "Lips"],
                "Fragrances": ["Men's Fragrance", "Women's Fragrance", "Perfume Sets"],
                "Tools & Accessories": ["Brushes", "Combs", "Hair Dryers", "Mirrors"]
            },
            "Automotive": {
                "Car Electronics": ["Dash Cams", "Chargers", "Audio Systems"],
                "Interior": ["Floor Mats", "Seat Covers"],
                "Exterior": ["Car Covers", "Lights"],
                "Tools & Equipment": ["Car Maintenance Tools", "Garage Equipment", "Jacks and Lifts"],
                "Maintenance": ["Engine Diagnostics", "Car Care Kits", "Fluids"],
                "Tire & Wheel": ["Tire Inflators", "Chains", "Wheel Covers"]
            },
            "Food & Beverage": {
                "Packaged Food": ["Snacks", "Canned Goods", "Grains"],
                "Beverages": ["Coffee", "Tea", "Energy Drinks"],
                "Health Foods": ["Protein Powders", "Organic Foods", "Meal Replacements"],
                "Specialty Diets": ["Gluten-Free", "Keto", "Vegan", "Organic"]
            },
            "Toys & Games": {
                "Action Figures": ["Superheroes", "Anime", "Collectibles"],
                "Board Games": ["Strategy", "Card Games", "Family Games"],
                "Puzzles": ["Jigsaw", "3D Puzzles", "Sudoku"],
                "Remote Control Toys": ["RC Cars", "RC Helicopters", "RC Boats"],
                "Educational": ["STEM Kits", "Learning Games", "Montessori"],
                "Outdoor Play": ["Sports Toys", "Water Toys", "Sandboxes"]
            },
            "Books": {
                "Fiction": ["Science Fiction", "Romance", "Mystery & Thriller"],
                "Non-Fiction": ["Biographies & Memoirs", "Business & Economics", "Self-Help"],
                "Educational": ["Textbooks", "Study Guides", "Reference Books"],
                "Digital": ["Ebooks", "Audiobooks"],
                "Kids' Books": ["Picture Books", "Early Readers", "Young Adult"]
            },
            "Health & Household": {
                "Health Care": ["Health Monitors", "Thermometers", "Blood Pressure Monitors"],
                "Household Supplies": ["Cleaning Products", "Air Fresheners", "Trash Bags"],
                "Personal Care": ["Oral Care", "Shaving & Grooming", "Deodorants"],
                "Medical Supplies": ["First Aid", "Diabetes Care", "Physical Therapy"],
                "Household Storage": ["Bins", "Organizers", "Shelving"]
            },
            "Office Supplies": {
                "Office Furniture": ["Desks", "Chairs", "Storage"],
                "Paper & Stationery": ["Notebooks", "Printer Paper", "Filing Supplies"],
                "Office Equipment": ["Printers", "Scanners", "Shredders"],
                "Technology": ["Computers", "Monitors", "Projectors"]
            },
            "Pets": {
                "Pet Food": ["Dog Food", "Cat Food"],
                "Pet Toys": ["Chew Toys", "Interactive Toys"],
                "Pet Supplies": ["Beds", "Leashes", "Collars"],
                "Pet Health": ["Supplements", "Grooming", "Flea Treatment"],
                "Pet Furniture": ["Beds", "Cages", "Crates", "Trees"]
            }
        };

        const GENDERS = ["Male", "Female", "Non-binary", "All"];
        
        // Expanded Personas List (B2B & B2C across all categories)
        const PERSONAS = [
            // --- B2B (Business) ---
            "Corporate Procurement Managers",
            "Wholesale Distributors",
            "Retail Store Owners (SME)",
            "Dropshippers & E-commerce Resellers",
            "Interior Designers & Architects",
            "Automotive Repair Shops",
            "Hospitality & Hotel Managers",
            "Educational Institutions / Schools",
            "Gym & Fitness Center Owners",
            "Medical & Healthcare Facilities",
            "Office Managers",
            "Construction Contractors",
            "Pet Groomers & Vets",
            
            // --- B2C (Consumer - Tech & Electronics) ---
            "Flagship Device Early Adopters",
            "High-Performance Mobile Gamers",
            "Professional Digital Nomads",
            "Tech-Savvy Content Creators",
            "Smart Home Automators",
            
            // --- B2C (Consumer - Home & Lifestyle) ---
            "Homeowners & Renovators",
            "DIY Enthusiasts",
            "Eco-Conscious Advocates",
            "Minimalist Organizers",
            "Parents & Families",
            "Gardeners & Outdoor Lovers",
            
            // --- B2C (Consumer - Fashion & Beauty) ---
            "Fashion Trendsetters",
            "Luxury Lifestyle Consumers",
            "Sneakerheads & Collectors",
            "Skincare Enthusiasts",
            "Beauty Professionals (Makeup Artists)",
            
            // --- B2C (Consumer - Hobbies & Interests) ---
            "Fitness & Wellness Enthusiasts",
            "Outdoor Adventurers (Camping/Hiking)",
            "Auto Enthusiasts & Tuners",
            "Pet Parents",
            "Bookworms & Students",
            "Gamers & Streamers",
            "Culinary Enthusiasts / Foodies",
            
            // --- General ---
            "Budget-Conscious Shoppers",
            "Gift Shoppers",
            "Senior Citizens"
        ];
        
        const INCOME_GROUPS = ["Low Income", "Middle Income", "High Income", "Affluent"];
        const LANGUAGES = ["Arabic", "Chinese (Mandarin)", "English", "French", "Russian", "Spanish"];

        // --- COMPONENTS ---

        const LoadingSpinner = () => (
            <div className="inline-flex items-center gap-2 text-gray-600 text-sm">
                <Icons.Loader className="animate-spin text-blue-600" size={16} />
                <span>Processing...</span>
            </div>
        );

        const InputField = ({ label, name, value, onChange, placeholder, type = "text", required, icon: Icon, error, action, ...props }) => (
            <div className="mb-4">
                <div className="flex justify-between items-center mb-1">
                    <label className={`block text-xs font-bold uppercase tracking-wider ${error ? 'text-red-500' : 'text-gray-500'}`}>
                        {label} {required && <span className="text-red-500">*</span>}
                    </label>
                    {action && action}
                </div>
                <div className="relative">
                    <input
                        type={type}
                        name={name}
                        value={value || ''} 
                        onChange={onChange}
                        placeholder={placeholder}
                        id={name} // Accessibility ID
                        className={`w-full pl-9 pr-3 py-2.5 border rounded-lg text-sm focus:ring-2 outline-none transition-all ${
                            error 
                                ? 'border-red-300 focus:ring-red-200 focus:border-red-500' 
                                : 'border-gray-300 focus:ring-blue-500 focus:border-transparent hover:border-blue-300'
                        } ${props.disabled || props.readOnly ? 'bg-gray-100 text-gray-500' : ''}`}
                        {...props}
                    />
                    {Icon ? <Icon className="absolute left-3 top-3 text-gray-400 w-4 h-4" /> : <div className="absolute left-3 top-2.5 w-4 h-4" />}
                </div>
                {error && <p className="text-xs text-red-500 mt-1 animate-fadeIn flex items-center gap-1"><span className="font-bold">!</span> {error}</p>}
            </div>
        );

        const TextArea = ({ label, name, value, onChange, placeholder, error, action }) => (
            <div className="mb-4 col-span-2">
                <div className="flex justify-between items-center mb-1">
                    <label className={`block text-xs font-bold uppercase tracking-wider ${error ? 'text-red-500' : 'text-gray-500'}`}>
                        {label}
                    </label>
                    {action && action}
                </div>
                <textarea
                    name={name}
                    value={value || ''} 
                    onChange={onChange}
                    placeholder={placeholder}
                    rows="4"
                    className={`w-full p-3 border rounded-lg text-sm focus:ring-2 outline-none transition-all ${
                        error 
                            ? 'border-red-300 focus:ring-red-200 focus:border-red-500' 
                            : 'border-gray-300 focus:ring-blue-500 focus:border-transparent hover:border-blue-300'
                    }`}
                ></textarea>
                {error && <p className="text-xs text-red-500 mt-1 animate-fadeIn flex items-center gap-1"><span className="font-bold">!</span> {error}</p>}
            </div>
        );

        const CheckboxGroup = ({ label, options, selected, onChange }) => (
            <div className="mb-4">
                <label className="block text-xs font-bold text-gray-500 uppercase mb-2 tracking-wider">{label}</label>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-2 bg-white border border-gray-200 p-3 rounded-lg max-h-40 overflow-y-auto">
                    {options.map(opt => (
                        <label key={opt} className="flex items-center gap-2 text-sm text-gray-700 cursor-pointer hover:bg-gray-50 p-1 rounded">
                            <input 
                                type="checkbox" 
                                checked={selected && selected.includes(opt)}
                                onChange={() => onChange(opt)}
                                className="rounded text-blue-600 focus:ring-blue-500"
                            />
                            {opt}
                        </label>
                    ))}
                </div>
            </div>
        );

        // NEW: MultiSelect Dropdown Component
        const MultiSelectDropdown = ({ label, options, selected, onChange, error }) => {
            const [isOpen, setIsOpen] = useState(false);
            const dropdownRef = useRef(null);

            useEffect(() => {
                const handleClickOutside = (event) => {
                    if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {
                        setIsOpen(false);
                    }
                };
                document.addEventListener("mousedown", handleClickOutside);
                return () => document.removeEventListener("mousedown", handleClickOutside);
            }, []);

            return (
                <div className="mb-4 relative" ref={dropdownRef}>
                    <label className={`block text-xs font-bold uppercase mb-1 tracking-wider ${error ? 'text-red-500' : 'text-gray-500'}`}>{label}</label>
                    <button
                        onClick={() => setIsOpen(!isOpen)}
                        className={`w-full text-left bg-white border py-2.5 px-3 rounded-lg text-sm focus:outline-none focus:ring-2 flex justify-between items-center transition-colors ${
                            error 
                            ? 'border-red-300 focus:ring-red-200' 
                            : 'border-gray-300 focus:ring-blue-500 hover:border-blue-300'
                        } text-gray-700`}
                    >
                        <span className="truncate">
                            {selected && selected.length > 0 ? `${selected.length} Selected` : "Select Options..."}
                        </span>
                        <ChevronDown size={16} className={`text-gray-400 transition-transform duration-200 ${isOpen ? 'rotate-180' : ''}`} />
                    </button>
                    
                    {isOpen && (
                        <div className="absolute z-20 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-xl max-h-60 overflow-y-auto">
                            {options.map(opt => (
                                <label key={opt} className="flex items-center gap-2 text-sm text-gray-700 cursor-pointer hover:bg-blue-50 p-2.5 border-b border-gray-100 last:border-0 transition-colors">
                                    <input 
                                        type="checkbox" 
                                        checked={selected ? selected.includes(opt) : false}
                                        onChange={() => onChange(opt)}
                                        className="rounded text-blue-600 focus:ring-blue-500 w-4 h-4"
                                    />
                                    {opt}
                                </label>
                            ))}
                        </div>
                    )}
                    {error && <p className="text-xs text-red-500 mt-1 animate-fadeIn flex items-center gap-1"><span className="font-bold">!</span> {error}</p>}
                    {selected && selected.length > 0 && (
                        <div className="flex flex-wrap gap-2 mt-2">
                            {selected.map(item => (
                                <span key={item} className="inline-flex items-center gap-1 bg-blue-50 border border-blue-100 text-blue-700 text-xs font-medium px-2.5 py-1 rounded-full animate-fadeIn">
                                    {item}
                                    <button onClick={() => onChange(item)} className="hover:text-blue-900 focus:outline-none ml-1">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                                    </button>
                                </span>
                            ))}
                        </div>
                    )}
                </div>
            );
        };

        const CopyButton = ({ text }) => {
            const [copied, setCopied] = useState(false);
            const handleCopy = () => {
                const textArea = document.createElement("textarea");
                textArea.value = text;
                textArea.style.position = "fixed";
                textArea.style.left = "-9999px";
                textArea.style.top = "0";
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                
                try {
                    document.execCommand('copy');
                    setCopied(true);
                    setTimeout(() => setCopied(false), 2000);
                } catch (err) {
                    console.error('Fallback: Oops, unable to copy', err);
                }
                
                document.body.removeChild(textArea);
            };
            return (
                <button aria-label="Copy to clipboard" onClick={handleCopy} className={`flex items-center gap-2 px-3 py-1.5 rounded-md text-xs font-medium transition-colors border ${copied ? 'bg-green-50 border-green-200 text-green-700' : 'bg-white border-gray-200 text-gray-600 hover:bg-gray-50'}`}>
                    {copied ? <Check size={14} /> : <Copy size={14} />} {copied ? 'Copied' : 'Copy'}
                </button>
            );
        };

        const SidebarStep = ({ stepNumber, label, icon: Icon, current, onClick }) => (
            <button onClick={() => onClick(stepNumber)} className={`w-full flex items-center gap-3 px-4 py-3.5 rounded-lg cursor-pointer transition-all border-l-4 text-left ${current === stepNumber ? 'bg-blue-900 border-blue-500 text-white shadow-lg' : 'border-transparent text-gray-400 hover:text-white hover:bg-gray-800'}`}>
                <div className={`flex-shrink-0 flex items-center justify-center w-6 h-6 rounded-full text-xs font-bold ${current === stepNumber ? 'bg-blue-500 text-white' : 'bg-gray-700 text-gray-400'}`}>{stepNumber}</div>
                <span className="font-medium text-xs md:text-sm">{label}</span>
            </button>
        );
        
        const ProgressBar = ({ step }) => (
            <div className="w-full bg-gray-200 h-1.5 mb-0">
                <div className="bg-blue-600 h-1.5 transition-all duration-500 ease-out" style={{ width: `${(step / 6) * 100}%` }}></div>
            </div>
        );

        // --- APP COMPONENT ---

        const App = () => {
            const [currentStep, setCurrentStep] = useState(1);
            const [activeOutputTab, setActiveOutputTab] = useState('html');
            
            // Validation Errors State
            const [errors, setErrors] = useState({});
            
            // Loading States
            const [isAnalyzingHS, setIsAnalyzingHS] = useState(false);

            // Data States - CLEANED (No hardcoded Cable/Brand info)
            const [orgData, setOrgData] = useState({ 
                orgName: "", 
                orgUrl: "", 
                orgLogoUrl: "", 
                orgPhone: "", 
                orgEmail: "", 
                orgAreaServed: "", 
                orgLanguage: [], 
                orgSameAs: "", 
                orgStreet: "", 
                orgCity: "", 
                orgRegion: "", 
                orgZip: "", 
                orgCountry: "", 
                orgFounder: "", 
                orgDateFounded: "", 
                orgLegalName: "" 
            });
            
            const [marketData, setMarketData] = useState({ 
                primaryKeywords: ["", "", ""], 
                selectedContinent: "North America", 
                selectedCountries: [], 
                selectedGenders: [], 
                selectedPersonas: [], 
                selectedIncome: [], 
                selectedLanguages: [], 
                analysis: "", 
                researchPrompt: "",
                hsSearchQuery: "", 
                hsCode: ""         
            });
            
            // NEW: State for Product Category (Defaults to empty to avoid bias)
            const [mainCategory, setMainCategory] = useState("");
            const [subCategory, setSubCategory] = useState("");
            
            // NEW: State for Step 6 Generation
            const [generatedAssets, setGeneratedAssets] = useState(null);
            
            // NEW: Validation State for Specs
            const [specErrors, setSpecErrors] = useState({});
            
            // NEW: Loading states for Step 4 AI
            const [isGeneratingTitle, setIsGeneratingTitle] = useState(false);
            const [isGeneratingDesc, setIsGeneratingDesc] = useState(false);

            // UPDATED: Specs Data to hold a superset of possible fields
            const [specsData, setSpecsData] = useState({ 
                // Common
                material: "", durability: "", certification: "", safety: "", eco: "", testLab: "", warranty: "", compatibility: "", packagingDimensions: "", weight: "", color: "",
                // Cable Specific
                connectorType: "", length: "", powerOutput: "", transferSpeed: "", bendLifespan: "", carplay: "",
                // Power Bank Specific
                batteryCapacity: "", chargingSpeed: "", ports: "", wirelessCharging: "", inputTime: "",
                // Charger Specific
                totalWattage: "", plugType: "", ganTech: "", inputVoltage: "",
                // Audio Specific
                batteryLife: "", noiseCancellation: "", driverSize: "", connectionType: "", waterproofRating: "",
                // Case Specific
                dropProtection: "", thickness: "", magSafe: "",
                // Clothing Specific
                size: "", fabric: "", fit: "", careInstructions: "", season: "",
                // Furniture Specific
                assemblyRequired: "", maxLoad: "", frameMaterial: "", upholstery: "",
                // Food Specific
                ingredients: "", allergenInfo: "", shelfLife: "", nutritionalValue: "", origin: "",
                // Beauty Specific
                skinType: "", volume: "", activeIngredients: "", scent: "",
                // Automotive
                vehicle: "", partNumber: "", installation: "",
                // Toys
                ageGroup: "", educationalFocus: "", pieces: "",
                // Books
                author: "", isbn: "", pages: "", publisher: "", language: "", format: "",
                // Pets
                breedSize: "", lifeStage: "", flavor: "",
                // Tech & Appliances
                connectivity: "", sensor: "", voltage: "", powerSource: "", appControl: "",
                // Footwear
                shoeSize: "", soleMaterial: "",
                // Outdoor
                capacity: "",
                // Beauty Extended
                scentNotes: "", concentration: "",
                // Computing
                processor: "", ram: "", storage: "", resolution: "", screenSize: ""
            });

            // Product Data - CLEANED
            const [productData, setProductData] = useState({ 
                productName: "", 
                description: "", 
                brandName: "", 
                sku: "", 
                price: "", 
                currency: "USD", 
                availability: "InStock", 
                weight: "", 
                dimensions: "", 
                shippingInfo: "", 
                warranty: "", 
                condition: "NewCondition", 
                productType: "Physical", 
                customFields: "", 
                productTags: "", 
                longTailKeywords: "",
                semanticKeywords: "", 
                reviewCount: "", 
                reviewScore: "", 
                category: "",
                additionalInfo: "",
                usp: "" 
            });

            // Content Data - CLEANED
            const [contentData, setContentData] = useState({
                faqs: [],
                internalLinks: [],
                externalLinks: [], 
                description: "",
                sitemapUrl: "", 
                externalLinksPrompt: ""
            });

            // NEW: Helper for SEO Score Calculation
            const calculateSEOScore = () => {
                const checks = [
                    { label: "USP Defined", valid: productData.usp && productData.usp.length > 10 },
                    { label: "Description Depth (>100 chars)", valid: productData.description && productData.description.length > 100 },
                    { label: "Internal Links Added", valid: contentData.internalLinks.length > 0 },
                    { label: "External Authority Links", valid: contentData.externalLinks.length > 0 },
                    { 
                        label: "Primary Keyword in Description", 
                        valid: marketData.primaryKeywords.some(kw => kw && productData.description.toLowerCase().includes(kw.toLowerCase())) 
                    }
                ];
                
                const passed = checks.filter(c => c.valid).length;
                const total = checks.length;
                const score = Math.round((passed / total) * 100);
                
                return { checks, score };
            };

            // Generators (Keep for reference or specific use cases)
            const generateHTML = () => {
                return `<!-- SEO CONTENT BLOCK -->
<article class="d8-product-content" itemscope itemtype="https://schema.org/Product">
    <!-- METADATA -->
    <meta itemprop="sku" content="${productData.sku}" />
    <meta itemprop="brand" content="${orgData.orgName}" />
    
    <!-- TITLE & HOOK -->
    <header class="mb-6">
        <h1 class="text-3xl font-bold mb-4 text-gray-900" itemprop="name">${productData.productName}</h1>
        <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-600">
            <p class="text-lg font-medium text-blue-900"><strong>Why You'll Love This:</strong> ${productData.usp}</p>
        </div>
    </header>

    <!-- PRODUCT DESCRIPTION -->
    <section class="mb-8 text-gray-700 leading-relaxed" itemprop="description">
        ${productData.description.replace(/\n/g, '<br>')}
    </section>

    <!-- ADDITIONAL INFO -->
    <section class="mb-8">
        <h3 class="text-xl font-bold mb-3">Product Details</h3>
        <p>${productData.additionalInfo}</p>
    </section>

    <!-- TECHNICAL SPECS -->
    <section class="overflow-x-auto mb-8">
        <h3 class="text-xl font-bold mb-3">Technical Specifications</h3>
        <table class="w-full text-left border-collapse">
            <tbody>
                <tr class="border-b"><td class="p-3 font-bold w-1/3">Length/Size</td><td class="p-3">${specsData.length || specsData.size || specsData.volume || 'N/A'}</td></tr>
                <tr class="border-b"><td class="p-3 font-bold">Material</td><td class="p-3">${specsData.material}</td></tr>
                <tr class="border-b"><td class="p-3 font-bold">Certification</td><td class="p-3">${specsData.certification}</td></tr>
                <tr class="border-b"><td class="p-3 font-bold">Warranty</td><td class="p-3">${productData.warranty}</td></tr>
                <tr class="border-b"><td class="p-3 font-bold">Key Feature</td><td class="p-3">${specsData.compatibility || specsData.activeIngredients || specsData.scent || 'N/A'}</td></tr>
            </tbody>
        </table>
    </section>

    <!-- FAQS (Schema Optimized) -->
    <section class="mb-8">
        <h3 class="text-xl font-bold mb-4">Frequently Asked Questions</h3>
        <div class="space-y-4">
            ${contentData.faqs.map(faq => `
            <div itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <h4 itemprop="name" class="font-bold text-gray-800">${faq.question}</h4>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                    <p itemprop="text" class="text-gray-600">${faq.answer}</p>
                </div>
            </div>`).join('')}
        </div>
    </section>

    <!-- RELATED RESOURCES (SEO Linking) -->
    <section class="bg-gray-50 p-6 rounded-lg mt-8">
        <h3 class="font-bold text-gray-900 mb-3">Learn More</h3>
        <ul class="list-disc pl-5 text-blue-600">
            ${contentData.internalLinks.map(link => `<li><a href="${link.url}" title="${link.title}">${link.title}</a></li>`).join('\n            ')}
            ${contentData.externalLinks.map(link => `<li><a href="${link.url}" target="_blank" rel="noopener noreferrer" title="${link.title}">${link.title}</a> (Reference)</li>`).join('\n            ')}
        </ul>
    </section>
    
    <!-- CTA BUTTON (CONVERSION OPTIMIZED) -->
    <div class="mt-8 text-center">
        <a href="${productData.productUrl || '#'}" class="btn inline-block bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700 transition-colors shadow-lg">Buy Now</a>
    </div>
</article>`;
            };

            // Handlers
            const handleOrgChange = (e) => {
                const { name, value } = e.target;
                setOrgData({...orgData, [name]: value});
                
                // Real-time error clearing
                if (errors[name]) {
                    setErrors(prev => ({...prev, [name]: null}));
                }
            };
            
            // UPDATED: Handle Specs Change with Validation
            const handleSpecsChange = (e) => {
                const { name, value } = e.target;
                setSpecsData(prev => ({...prev, [name]: value}));

                // Validation Logic
                let error = "";
                
                // List of fields that generally require numeric values (mixed with units is okay)
                const numericFields = [
                    "length", "powerOutput", "batteryCapacity", "totalWattage", "inputVoltage", 
                    "batteryLife", "dropProtection", "thickness", "size", "shoeSize", 
                    "maxLoad", "shelfLife", "nutritionalValue", "volume", "weight", 
                    "pieces", "pages", "voltage", "capacity"
                ];

                if (numericFields.includes(name) && value.trim().length > 0) {
                    // regex checks if there is at least one digit in the string
                    const hasNumber = /\d/.test(value);
                    if (!hasNumber) {
                        error = "This field usually requires a numeric value (e.g., '10kg', '500ml')";
                    }
                }

                // ISBN Validation (Simple check for length)
                if (name === "isbn" && value.trim().length > 0) {
                    const cleanISBN = value.replace(/[^0-9X]/gi, '');
                    if (cleanISBN.length !== 10 && cleanISBN.length !== 13) {
                        error = "ISBN should be 10 or 13 digits";
                    }
                }

                setSpecErrors(prev => ({...prev, [name]: error}));
            };

            const handleProductChange = (e) => {
                const { name, value } = e.target;
                setProductData({...productData, [name]: value});
                
                // Real-time error clearing
                if (errors[name]) {
                    setErrors(prev => ({...prev, [name]: null}));
                }
            };
            
            // ROBUST TOGGLE SELECTION
            const toggleSelection = (list, item) => {
                 const currentList = list || [];
                 return currentList.includes(item) ? currentList.filter(i => i !== item) : [...currentList, item];
            };

            // NEW: Handle Region Change (Clears Countries)
            const handleRegionChange = (e) => {
                const newRegion = e.target.value;
                setMarketData(prev => ({
                    ...prev, 
                    selectedContinent: newRegion,
                    selectedCountries: [] // Clear countries when region changes to prevent mismatches
                }));
                
                if (errors.region) {
                    setErrors(prev => ({...prev, region: null}));
                }
            };
            
            // Handle Product Category Change (INTERLINKED LOGIC)
            const handleMainCategoryChange = (e) => {
                const newMain = e.target.value;
                setMainCategory(newMain);
                
                // Clear error if exists
                if (errors.category) {
                    setErrors(prev => ({...prev, category: null}));
                }
                
                // Reset sub to first available in new main category if exists
                if (newMain && PRODUCT_CATEGORIES[newMain]) {
                    const firstSubCatKey = Object.keys(PRODUCT_CATEGORIES[newMain])[0];
                    const firstSubItem = PRODUCT_CATEGORIES[newMain][firstSubCatKey][0];
                    setSubCategory(firstSubItem);
                    
                    // DATA FLOW: Step 3 feeds Step 4
                    setProductData(prev => ({
                        ...prev, 
                        category: firstSubItem,
                        productName: `${firstSubItem}` // Removed "Dynamic" prefix
                    }));
                } else {
                    setSubCategory("");
                }
            };

            const handleSubCategoryChange = (e) => {
                const newSub = e.target.value;
                setSubCategory(newSub);
                
                // DATA FLOW: Step 3 feeds Step 4
                setProductData(prev => ({
                    ...prev, 
                    category: newSub,
                    productName: `${newSub}` // Removed "Dynamic" prefix
                }));
            };

            // NEW: Helper for Mock HS Code (Fallback - Expanded to cover TariffNumber.com 2025 categories)
            const getMockHSCode = (query) => {
                const q = query.toLowerCase();
                
                // --- SECTION IV: FOOD & BEVERAGES ---
                if(q.includes("protein") || q.includes("supplement")) return "2106.90 - Food preparations not elsewhere specified";
                if(q.includes("coffee")) return "0901.21 - Coffee, roasted, not decaffeinated";
                if(q.includes("tea")) return "0902.10 - Green tea";
                if(q.includes("water") || q.includes("drink") || q.includes("beverage")) return "2202.10 - Waters, including mineral waters and aerated waters";
                if(q.includes("snack") || q.includes("chip") || q.includes("food")) return "1905.90 - Bread, pastry, cakes, biscuits";
                if(q.includes("pet food") || q.includes("dog food") || q.includes("cat food")) return "2309.10 - Dog or cat food, put up for retail sale";

                // --- SECTION VI: CHEMICALS (BEAUTY & HEALTH) ---
                if(q.includes("shampoo")) return "3305.10 - Shampoos";
                if(q.includes("skin") || q.includes("cream") || q.includes("lotion") || q.includes("moisturizer")) return "3304.99 - Beauty or make-up preparations for the care of the skin";
                if(q.includes("perfume") || q.includes("fragrance")) return "3303.00 - Perfumes and toilet waters";
                if(q.includes("soap") || q.includes("wash")) return "3401.11 - Soap and organic surface-active products";
                if(q.includes("vitamin") || q.includes("medicine") || q.includes("drug")) return "3004.90 - Medicaments (excluding goods of heading 30.02, 30.05 or 30.06)";
                if(q.includes("cleaning") || q.includes("detergent")) return "3402.20 - Surface-active preparations, retail sale";

                // --- SECTION VIII: LEATHER & TRAVEL GOODS ---
                if(q.includes("bag") || q.includes("backpack") || q.includes("purse") || q.includes("wallet")) return "4202.92 - Trunks, suitcases, vanity-cases, rucksacks";
                if(q.includes("leather case") || q.includes("case")) return "4205.00 - Other articles of leather";

                // --- SECTION X: PAPER & BOOKS ---
                if(q.includes("book") || q.includes("textbook")) return "4901.99 - Printed books, brochures, leaflets";
                if(q.includes("notebook") || q.includes("paper")) return "4820.10 - Registers, account books, note books";

                // --- SECTION XI: TEXTILES & CLOTHING ---
                if(q.includes("t-shirt")) return "6109.10 - T-shirts, singlets and other vests, knitted or crocheted";
                if(q.includes("jacket") || q.includes("coat")) return "6201.90 - Men's or boys' overcoats, car-coats, capes";
                if(q.includes("dress")) return "6204.42 - Women's or girls' dresses";
                if(q.includes("pants") || q.includes("trousers") || q.includes("jeans")) return "6203.42 - Men's or boys' trousers, bib and brace overalls";
                if(q.includes("sportswear") || q.includes("activewear")) return "6114.30 - Other garments, knitted or crocheted (man-made fibers)";
                if(q.includes("bed") || q.includes("sheet") || q.includes("pillow")) return "6302.10 - Bed linen, knitted or crocheted";

                // --- SECTION XII: FOOTWEAR ---
                if(q.includes("shoe") || q.includes("sneaker") || q.includes("boot") || q.includes("sandal")) return "6404.11 - Footwear with outer soles of rubber, plastics, leather";

                // --- SECTION XVI: ELECTRONICS & MACHINERY ---
                if(q.includes("phone") || q.includes("mobile")) return "8517.12 - Telephones for cellular networks or for other wireless networks";
                if(q.includes("laptop") || q.includes("computer") || q.includes("tablet")) return "8471.30 - Portable automatic data processing machines";
                if(q.includes("monitor") || q.includes("screen")) return "8528.59 - Other monitors";
                if(q.includes("cable") || q.includes("wire") || q.includes("usb")) return "8544.42 - Insulated electric conductors, fitted with connectors";
                if(q.includes("charger") || q.includes("adapter") || q.includes("power supply")) return "8504.40 - Static converters (e.g. rectifiers)";
                if(q.includes("battery") || q.includes("power bank")) return "8507.60 - Lithium-ion accumulators";
                if(q.includes("headphone") || q.includes("earphone") || q.includes("speaker") || q.includes("audio")) return "8518.30 - Headphones and earphones";
                if(q.includes("camera") || q.includes("lens")) return "8525.80 - Television cameras, digital cameras and video camera recorders";
                if(q.includes("watch") || q.includes("smartwatch")) return "9102.12 - Wrist-watches, electrically operated";
                if(q.includes("vacuum") || q.includes("robot")) return "8508.11 - Vacuum cleaners with self-contained electric motor";

                // --- SECTION XVII: VEHICLES ---
                if(q.includes("car") || q.includes("vehicle")) return "8703.23 - Motor cars and other motor vehicles";
                if(q.includes("tire") || q.includes("tyre")) return "4011.10 - New pneumatic tires, of rubber (for cars)";
                if(q.includes("part") || q.includes("accessory") || q.includes("filter") || q.includes("bumper")) return "8708.99 - Parts and accessories of the motor vehicles";
                if(q.includes("bike") || q.includes("bicycle")) return "8712.00 - Bicycles and other cycles (including delivery tricycles)";

                // --- SECTION XVIII: OPTICAL & MEDICAL ---
                if(q.includes("glasses") || q.includes("sunglasses")) return "9004.10 - Sunglasses";
                if(q.includes("thermometer") || q.includes("blood pressure")) return "9018.90 - Instruments and appliances used in medical, surgical, dental or veterinary sciences";

                // --- SECTION XX: MISCELLANEOUS (FURNITURE, TOYS, SPORTS) ---
                if(q.includes("furniture") || q.includes("chair") || q.includes("sofa") || q.includes("table")) return "9401.61 - Other seats, with wooden frames";
                if(q.includes("lamp") || q.includes("light")) return "9405.10 - Chandeliers and other electric ceiling or wall lighting fittings";
                if(q.includes("toy") || q.includes("game") || q.includes("puzzle") || q.includes("doll")) return "9503.00 - Tricycles, scooters, pedal cars and similar wheeled toys; dolls; other toys";
                if(q.includes("sport") || q.includes("gym") || q.includes("fitness") || q.includes("yoga")) return "9506.91 - Articles and equipment for general physical exercise, gymnastics or athletics";
                if(q.includes("fishing")) return "9507.10 - Fishing rods";
                if(q.includes("tent")) return "6306.22 - Tents (of synthetic fibers)";

                // Generic Fallback
                return "0000.00 (Simulated)";
            }

            // MODIFIED: Real-Time HS Code Identification via DeepSeek API with Fallback
            const identifyHSCode = async () => {
                const query = marketData.hsSearchQuery;
                if (!query) {
                    alert("Please enter a product description first.");
                    return;
                }

                // UI Feedback
                setIsAnalyzingHS(true);
                setMarketData(prev => ({...prev, hsCode: " Analyzing..."}));

                const apiKey = "sk-749a828681be4795ad19e6b38d22298b";
                const prompt = `You are a specialized Customs Classification Expert. 
User Input: "${query}"
Task: Identify the most accurate Harmonized System (HS) Code (6-digit or 8-digit) for this product.
Output Format: STRICTLY return the code followed by a short classification title. Do not include conversational text.
Example: "8544.42 - Insulated Electric Conductors"
`;

                try {
                    const response = await fetch("https://api.deepseek.com/chat/completions", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            "Authorization": `Bearer ${apiKey}`
                        },
                        body: JSON.stringify({
                            model: "deepseek-chat",
                            messages: [
                                { role: "system", content: "You are a helpful assistant that provides HS Codes." },
                                { role: "user", content: prompt }
                            ],
                            temperature: 0.3, // Low temp for factual accuracy
                            stream: false
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`API Error: ${response.statusText}`);
                    }

                    const data = await response.json();
                    
                    if (data.choices && data.choices[0]) {
                        // Clean up the response to ensure it fits the field
                        const result = data.choices[0].message.content.trim();
                        setMarketData(prev => ({...prev, hsCode: result}));
                    } else {
                        throw new Error("No content in response");
                    }
                } catch (error) {
                    console.warn("HS Code Fetch Error (Switching to Fallback):", error);
                    const mockResult = getMockHSCode(query);
                    setMarketData(prev => ({
                        ...prev, 
                        hsCode: `${mockResult} (Offline Fallback)`
                    }));
                } finally {
                    setIsAnalyzingHS(false);
                }
            };

            // Open TransCustoms Search
            const openHSReference = () => {
                const query = encodeURIComponent(marketData.hsSearchQuery);
                window.open(`https://www.transcustoms.com/HScode/HScode_search.asp?keyword=${query}`, '_blank');
            };

            // Validation
            const validateStep = () => {
                const newErrors = {};
                
                switch(currentStep) {
                    case 1:
                        if (!orgData.orgName.trim()) newErrors.orgName = "Organization Name is required.";
                        if (orgData.orgUrl && !/^https?:\/\//.test(orgData.orgUrl)) newErrors.orgUrl = "URL must start with http:// or https://";
                        if (orgData.orgEmail && !/\S+@\S+\.\S+/.test(orgData.orgEmail)) newErrors.orgEmail = "Invalid email format.";
                        break;
                    case 2:
                        if (!marketData.selectedContinent) newErrors.region = "Please select a Target Region.";
                        break;
                    case 3:
                        if (!mainCategory || !subCategory) newErrors.category = "Please select a Product Industry and Type.";
                        break;
                    case 4:
                        if (!productData.productName.trim()) newErrors.productName = "Product Name is required.";
                        if (!productData.productTags.trim()) newErrors.productTags = "At least one Product Tag is required.";
                        break;
                    default:
                        break;
                }

                setErrors(newErrors);
                // Return true if no errors
                return Object.keys(newErrors).length === 0;
            };

            const handleNextStep = () => {
                if (!validateStep()) {
                    // Scroll to top to see errors if needed, or they are inline
                    return;
                }
                setCurrentStep(currentStep + 1);
            };

            // Reset Project
            const resetProject = () => {
                if(confirm("Are you sure you want to reset all data? This cannot be undone.")) {
                    window.location.reload();
                }
            };

            // NEW: Simulate Submit Project
            const submitProject = () => {
                // In a real app, this would POST to an API
                const confirmSubmit = confirm("Confirm submission of all SEO & GEO assets?");
                if (!confirmSubmit) return;

                alert(" Project Submitted Successfully!\n\nAll data has been recorded. You can now export the files or start a new project.");
            };

            // Export Data
            const exportData = () => {
                const data = {
                    orgData,
                    marketData,
                    specsData,
                    productData,
                    contentData,
                    generatedAssets
                };
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: "application/json" });
                const url = URL.createObjectURL(blob);
                const a = document.createElement("a");
                a.href = url;
                a.download = "seo-geo-architect-data.json";
                a.click();
            };

            // Auto-Generate Keywords Mock Logic (CLEANED)
            const autoGenerateKeywords = () => {
                 // Generic Placeholders since we removed hardcoded cable data
                const primary = [
                    "Primary Keyword 1",
                    "Primary Keyword 2",
                    "Primary Keyword 3",
                    "Category Specific Keyword",
                    "Product Feature Keyword"
                ];

                const longTail = [
                    "Best [Product Category] for [Target Audience]",
                    "High quality [Product Name] with [Feature]",
                    "Affordable [Product Category] in [Region]",
                    "Top rated [Product Name] reviews",
                    "Durable [Material] [Product Category]"
                ];

                const semantic = [
                    "Synonym 1 for Product",
                    "Related Industry Term",
                    "User Intent Keyword",
                    "Alternative Name",
                    "Complementary Product"
                ];

                setMarketData(prev => ({ ...prev, primaryKeywords: primary }));
                setProductData(prev => ({
                    ...prev,
                    longTailKeywords: longTail.join(', '),
                    semanticKeywords: semantic.join(', ')
                }));
            };

            // Helper: Get Active Specs string for Prompts
            const getActiveSpecsString = () => {
                return Object.entries(specsData)
                    .filter(([_, val]) => val && val.trim().length > 0)
                    .map(([key, val]) => `${key}: ${val}`)
                    .join(', ');
            };

            // MODIFIED: Smart Title Generation Logic (DeepSeek AI Integration)
            const generateSmartTitle = async () => {
                setIsGeneratingTitle(true);
                const brand = productData.brandName || orgData.orgName || "Brand";
                const category = subCategory || "Product";
                const specs = getActiveSpecsString();
                const keywords = marketData.primaryKeywords.filter(k => k).join(", ");
                const persona = marketData.selectedPersonas.join(", ");

                // Fallback template
                const fallbackTitle = `${brand} ${category}  ${specs.split(',')[0] || 'Premium'}  ${productData.usp || 'High Quality'}`;

                try {
                    const apiKey = "sk-749a828681be4795ad19e6b38d22298b";
                    // SEO & AEO PROMPT
                    const prompt = `Act as an E-commerce SEO Expert. Generate a single, high-converting product title.
Context:
- Product Category: ${category}
- Brand: ${brand}
- Key Specs: ${specs}
- Target Audience: ${persona}
- Keywords: ${keywords}

Requirements:
- Optimize for AEO (Answer Engine Optimization): Be specific and factual.
- Format: Brand + Product Type + Key Feature 1 + Key Feature 2 + (Size/Color if applicable)
- Length: 60-100 characters optimized for Google SERP.
- No quotation marks. Just the title.`;

                    const response = await fetch("https://api.deepseek.com/chat/completions", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            "Authorization": `Bearer ${apiKey}`
                        },
                        body: JSON.stringify({
                            model: "deepseek-chat",
                            messages: [{ role: "user", content: prompt }],
                            temperature: 0.4,
                            stream: false
                        })
                    });

                    if (!response.ok) throw new Error("API Error");
                    const data = await response.json();
                    
                    if (data.choices && data.choices[0]) {
                        setProductData(prev => ({...prev, productName: data.choices[0].message.content.trim().replace(/^"|"$/g, '')}));
                    } else {
                        setProductData(prev => ({...prev, productName: fallbackTitle}));
                    }
                } catch (error) {
                    console.warn("AI Title Generation Failed:", error);
                    setProductData(prev => ({...prev, productName: fallbackTitle}));
                } finally {
                    setIsGeneratingTitle(false);
                }
            };

            // MODIFIED: Smart Description Generation Logic (DeepSeek AI Integration)
            const generateSmartDescription = async () => {
                setIsGeneratingDesc(true);
                const brand = productData.brandName || orgData.orgName || "Our Brand";
                const productName = productData.productName || subCategory || "This Product";
                const specs = getActiveSpecsString();
                const persona = marketData.selectedPersonas.join(", ") || "discerning customers";
                const usp = productData.usp || "Premium Quality";
                const language = orgData.orgLanguage && orgData.orgLanguage.length > 0 ? orgData.orgLanguage.join(", ") : "English";
                const region = marketData.selectedCountries.join(", ") || "Global";

                // Fallback template
                const fallbackDesc = `Experience the difference with the ${productName} from ${brand}. Perfectly engineered for ${persona}, it combines style, performance, and reliability.\n\nKey Features:\n${specs.split(', ').map(s => ` ${s}`).join('\n')}\n\nUpgrade your experience today. Order now.`;

                try {
                    const apiKey = "sk-749a828681be4795ad19e6b38d22298b";
                    // GEO & AEO PROMPT
                    const prompt = `Act as a Senior SEO Copywriter specializing in AEO and GEO. Write a compelling e-commerce product description.
Context:
- Product: ${productName}
- Brand: ${brand}
- Target Audience: ${persona}
- USP: ${usp}
- Technical Specs: ${specs}
- Target Region: ${region} (Adapt tone/spelling if needed)
- Output Language: ${language}

Structure:
1. Hook: Address a specific pain point for the target audience.
2. Solution: How this product solves it using the USP.
3. AEO Snippet: A concise definition of what the product is (for Voice Search).
4. Feature Highlights: 3-5 bullet points translating specs into benefits.
5. Call to Action.

Tone: Persuasive, Professional, Trustworthy.
Output: Plain text (with bullet points using ).`;

                    const response = await fetch("https://api.deepseek.com/chat/completions", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            "Authorization": `Bearer ${apiKey}`
                        },
                        body: JSON.stringify({
                            model: "deepseek-chat",
                            messages: [{ role: "user", content: prompt }],
                            temperature: 0.5,
                            stream: false
                        })
                    });

                    if (!response.ok) throw new Error("API Error");
                    const data = await response.json();
                    
                    if (data.choices && data.choices[0]) {
                        setProductData(prev => ({...prev, description: data.choices[0].message.content.trim()}));
                    } else {
                        setProductData(prev => ({...prev, description: fallbackDesc}));
                    }
                } catch (error) {
                    console.warn("AI Description Generation Failed:", error);
                    setProductData(prev => ({...prev, description: fallbackDesc}));
                } finally {
                    setIsGeneratingDesc(false);
                }
            };

            // Add/Remove Internal Links
            const addInternalLink = () => setContentData(prev => ({...prev, internalLinks: [...prev.internalLinks, {title: "", url: ""}]}));
            
            const updateInternalLink = (idx, field, val) => {
                const newLinks = contentData.internalLinks.map((link, i) =>
                    i === idx ? { ...link, [field]: val } : link
                );
                setContentData(prev => ({...prev, internalLinks: newLinks}));
            };
            
            const removeInternalLink = (idx) => {
                const newLinks = contentData.internalLinks.filter((_, i) => i !== idx);
                setContentData(prev => ({...prev, internalLinks: newLinks}));
            };

            // NEW: Add/Remove External Links
            const addExternalLink = () => setContentData(prev => ({...prev, externalLinks: [...prev.externalLinks, {title: "", url: ""}]}));
            
            const updateExternalLink = (idx, field, val) => {
                const newLinks = contentData.externalLinks.map((link, i) =>
                    i === idx ? { ...link, [field]: val } : link
                );
                setContentData(prev => ({...prev, externalLinks: newLinks}));
            };
            
            const removeExternalLink = (idx) => {
                const newLinks = contentData.externalLinks.filter((_, i) => i !== idx);
                setContentData(prev => ({...prev, externalLinks: newLinks}));
            };

            const generateResearchStrategy = () => {
                const strategy = `STRATEGIC RESEARCH ARCHITECT
Target Markets: ${marketData.selectedCountries.join(', ') || 'Global'}
Target Persona: ${marketData.selectedPersonas.join(', ') || 'General'}
HS Code Scope: ${marketData.hsCode || 'Pending Search'}
Primary Keywords: ${marketData.primaryKeywords.join(', ')}

1. REGULATORY INTELLIGENCE
   - Validate compliance for HS Code ${marketData.hsCode} in target regions.
   - Check specific labeling requirements for ${subCategory || 'this product category'}.

2. PERSONA VALIDATION
   - Analyze purchasing power of ${marketData.selectedIncome.join(', ')}.
   - Align value proposition with ${marketData.selectedPersonas.join(', ')}.

3. LOGISTICS & DISTRIBUTION
   - Evaluate shipping routes to ${marketData.selectedContinent}.
   - Assess duty impact on pricing strategy.

4. COMPETITION
   - Identify local incumbents in ${marketData.selectedCountries[0] || 'target region'}.`;
                
                setMarketData(prev => ({...prev, analysis: strategy}));
            };

            // Helper for Mock Report (Fallback)
            const getMockReport = (countries, personas, hsCode) => {
                return `
#  GLOBAL MARKET INTELLIGENCE REPORT (SIMULATED FALLBACK)
**Generated via Dynamic SEO & GEO Architect**

## 1. MARKET OVERVIEW: ${countries.toUpperCase()}
* **Target Audience:** ${personas}
* **HS Code Scope:** ${hsCode}

## 2. REGULATORY COMPLIANCE (HS CODE: ${hsCode})
* **Import Duties:** Estimated average duty rate for ${hsCode} in ${countries} is typically between 0-15% (Verify with local customs).
* **Certifications Required:** CE, FCC, and RoHS are standard. Specific checks required for ${hsCode} regarding voltage and safety standards.

## 3. COMPETITIVE LANDSCAPE
* **Key Players:** Anker, Belkin, Native Union.
* **Gap Analysis:** ${personas} are underserved in the premium durability segment.

## 4. MARKETING ANGLES
* **Hook:** "The last cable you will ever need."
* **Angle:** Focus on long-term savings vs. buying cheap cables repeatedly.
`;
            };

            // MODIFIED: Generate AI Report using DeepSeek API
            const generateAIReport = async () => {
                if (!marketData.hsCode) {
                    alert("Please identify or enter a Product HS Code first to generate an accurate Regulatory & Duty Report.");
                    return;
                }

                if (!marketData.analysis) {
                    alert("Please click '1. Build Strategy' first to generate the framework for the AI report.");
                    return;
                }

                const countries = marketData.selectedCountries.join(', ') || "Global";
                const personas = marketData.selectedPersonas.join(', ') || "General Audience";
                const hsCode = marketData.hsCode;
                const product = productData.productName || subCategory || "Product";
                const strategyContext = marketData.analysis;

                setMarketData(prev => ({...prev, researchPrompt: " Digesting Strategy & Connecting to DeepSeek AI for detailed market analysis..."}));

                const apiKey = "sk-749a828681be4795ad19e6b38d22298b"; 
                
                // PROMPT ENGINEERING: Feeds the previous step's output into this request
                const prompt = `Act as a Senior International Market Researcher. 

INPUT CONTEXT:
1. Product Category: ${product}
2. HS Code: ${hsCode}
3. Target Markets: ${countries}
4. Target Personas: ${personas}

STRATEGIC ARCHITECT FRAMEWORK (Use this as the foundation):
"""
${strategyContext}
"""

TASK:
Generate a comprehensive "Global Market Intelligence Report" that expands upon the Strategic Framework provided above. Do not simply repeat the framework; use it to generate specific, actionable insights.

REPORT STRUCTURE (Markdown):
1. Executive Summary: Synthesis of the provided strategy.
2. Regulatory Deep Dive: Specific import duties, taxes, and non-tariff barriers for HS Code ${hsCode} in ${countries}.
3. Persona Analysis: Behavioral triggers and specific marketing hooks for ${personas}.
4. Competitive Analysis: Key competitors in these specific regions.
5. Actionable Recommendations: 3 clear steps to enter this market based on the strategy.`;

                try {
                    const response = await fetch("https://api.deepseek.com/chat/completions", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            "Authorization": `Bearer ${apiKey}`
                        },
                        body: JSON.stringify({
                            model: "deepseek-chat",
                            messages: [
                                { role: "system", content: "You are an expert international trade consultant and SEO strategist. You analyze input strategies to create detailed reports." },
                                { role: "user", content: prompt }
                            ],
                            stream: false
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`API Error: ${response.statusText}`);
                    }

                    const data = await response.json();
                    
                    if (data.choices && data.choices[0]) {
                        setMarketData(prev => ({...prev, researchPrompt: data.choices[0].message.content}));
                    } else {
                        throw new Error("No content in response");
                    }
                } catch (error) {
                    console.error("Fetch Error:", error);
                    setMarketData(prev => ({
                        ...prev, 
                        researchPrompt: ` **API Connection Failed:** ${error.message}\n\nUsing simulated data based on your inputs:\n` + getMockReport(countries, personas, hsCode)
                    }));
                }
            };

            // SEO Output Generator for Step 6 - RESTORED AND FIXED
            const generateSEOOutputs = () => {
                const slugify = (str) => str ? str.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)+/g, '') : '';
                
                // DATA FLOW INTEGRATION:
                // 1. Brand: Prefer Product Data (Step 4), fallback to Org Data (Step 1)
                const brand = productData.brandName || orgData.orgName || 'Brand';
                
                // 2. Specs: Extract active engineering specs (Step 3) to enrich SEO
                const activeSpecs = Object.entries(specsData)
                    .filter(([_, val]) => val && val.trim().length > 0)
                    .slice(0, 3) // Take top 3 specs
                    .map(([_, val]) => val)
                    .join(', ');

                // 3. Keywords: Use Market Strategy (Step 2)
                const mainKeyword = marketData.primaryKeywords[0] || subCategory;

                let productTitle = `${brand} ${productData.productName}`;
                
                // Enrich Title with Engineering Specs (Step 3 Data feeding Step 6)
                if (activeSpecs) {
                    productTitle += `  ${activeSpecs}`;
                } else {
                    const keyFeatures = productData.productTags ? productData.productTags.split(',').slice(0, 2).join(', ') : 'High Quality';
                    productTitle += `  ${keyFeatures}`;
                }
                
                const blogTitle = `How to Choose the Best ${mainKeyword} for Your Needs`;
                const blogUrl = `/blog/${slugify(blogTitle)}`;

                // UPDATED: Raw JSON Array format for FAQs (Step 5 Data feeding Step 6)
                const faqsSimple = contentData.faqs.map(f => ({
                    question: f.question,
                    answer: f.answer
                }));

                const metaTitle = `${productTitle.substring(0, 55)}... | ${brand}`;
                const metaDesc = `Shop the ${brand} ${productData.productName}. ${productData.usp || ''} ${activeSpecs ? 'Features: ' + activeSpecs + '.' : ''} ${productData.warranty} warranty. Buy now!`.substring(0, 160);
                const productUrl = `/products/${slugify(productData.productName)}`;

                setGeneratedAssets({
                    productTitle,
                    blogTitle,
                    blogUrl,
                    faqsJson: JSON.stringify(faqsSimple, null, 2),
                    metaTitle,
                    metaDesc,
                    productUrl
                });
            };

            // --- RENDER STEPS ---
            const renderStepContent = () => {
                switch(currentStep) {
                    case 1: return (
                        <div className="p-6 overflow-y-auto h-full step-content">
                            <h2 className="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2"><Building className="text-blue-600"/> Organization Governance</h2>
                            <div className="bg-white p-6 rounded-xl border border-gray-200 shadow-sm space-y-4 mb-6">
                                <h3 className="text-sm font-bold text-gray-900 uppercase border-b pb-2">A. Basic Information</h3>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <InputField label="Organization Name" name="orgName" value={orgData.orgName} onChange={handleOrgChange} placeholder="e.g. Acme Corp" error={errors.orgName} required />
                                    <InputField label="URL" name="orgUrl" value={orgData.orgUrl} onChange={handleOrgChange} placeholder="https://www.example.com" error={errors.orgUrl} />
                                </div>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <InputField label="Logo URL" name="orgLogoUrl" value={orgData.orgLogoUrl} onChange={handleOrgChange} placeholder="https://www.example.com/logo.png" />
                                </div>
                            </div>
                            <div className="bg-white p-6 rounded-xl border border-gray-200 shadow-sm space-y-4 mb-6">
                                <h3 className="text-sm font-bold text-gray-900 uppercase border-b pb-2">B. Contact Information</h3>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <InputField label="Telephone" name="orgPhone" value={orgData.orgPhone} onChange={handleOrgChange} placeholder="+1-555-010-9988" />
                                    <InputField label="Email" name="orgEmail" value={orgData.orgEmail} onChange={handleOrgChange} placeholder="contact@example.com" error={errors.orgEmail} />
                                </div>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <InputField label="Area Served" name="orgAreaServed" value={orgData.orgAreaServed} onChange={handleOrgChange} placeholder="e.g. Global, North America" />
                                    {/* UPDATED: MultiSelect for Organization Languages in Step 1 */}
                                    <MultiSelectDropdown 
                                        label="Available Languages" 
                                        options={LANGUAGES} 
                                        selected={orgData.orgLanguage} 
                                        onChange={(item) => setOrgData({...orgData, orgLanguage: toggleSelection(orgData.orgLanguage, item)})} 
                                    />
                                </div>
                                <TextArea label="SameAs (Social Profiles)" name="orgSameAs" value={orgData.orgSameAs} onChange={handleOrgChange} placeholder="https://facebook.com/yourbrand&#10;https://twitter.com/yourbrand&#10;https://linkedin.com/company/yourbrand" />
                            </div>
                            <div className="bg-white p-6 rounded-xl border border-gray-200 shadow-sm space-y-4 mb-6">
                                <h3 className="text-sm font-bold text-gray-900 uppercase border-b pb-2">C. Location/Address Information</h3>
                                <InputField label="Street Address" name="orgStreet" value={orgData.orgStreet} onChange={handleOrgChange} placeholder="123 Innovation Drive" />
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <InputField label="Locality (City)" name="orgCity" value={orgData.orgCity} onChange={handleOrgChange} placeholder="New York" />
                                    <InputField label="Region (State)" name="orgRegion" value={orgData.orgRegion} onChange={handleOrgChange} placeholder="NY" />
                                </div>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <InputField label="Postal Code" name="orgZip" value={orgData.orgZip} onChange={handleOrgChange} placeholder="10001" />
                                    <InputField label="Country" name="orgCountry" value={orgData.orgCountry} onChange={handleOrgChange} placeholder="USA" />
                                </div>
                            </div>
                            <div className="bg-white p-6 rounded-xl border border-gray-200 shadow-sm space-y-4 mb-6">
                                <h3 className="text-sm font-bold text-gray-900 uppercase border-b pb-2">D. Additional Information</h3>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <InputField label="Founder" name="orgFounder" value={orgData.orgFounder} onChange={handleOrgChange} placeholder="e.g. John Doe" />
                                    <InputField label="Date Founded" name="orgDateFounded" value={orgData.orgDateFounded} onChange={handleOrgChange} type="date" />
                                </div>
                                <InputField label="Legal Name" name="orgLegalName" value={orgData.orgLegalName} onChange={handleOrgChange} placeholder="e.g. Acme Corporation Ltd." />
                            </div>
                        </div>
                    );
                    case 2: return (
                        <div className="p-6 overflow-y-auto h-full step-content">
                            <h2 className="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2"><Globe className="text-blue-600"/> Global Market Strategy</h2>
                            <div className="bg-white p-6 rounded-xl border border-gray-200 shadow-sm space-y-6">
                                <div>
                                    <label className="block text-xs font-bold text-gray-500 uppercase mb-1">Primary Keywords (Top 3)</label>
                                    <div className="grid grid-cols-3 gap-2 mb-4">
                                        {marketData.primaryKeywords.map((kw, i) => (
                                            <input key={i} className="w-full p-2 border border-gray-300 rounded-lg text-sm" value={kw} onChange={(e) => { const newKw = [...marketData.primaryKeywords]; newKw[i] = e.target.value; setMarketData({...marketData, primaryKeywords: newKw}); }} />
                                        ))}
                                    </div>
                                    
                                    {/* UPDATED: Standard Select for Target Region (Single Choice to drive Countries) */}
                                    <div className="mb-4">
                                        <label className={`block text-xs font-bold uppercase mb-1 tracking-wider ${errors.region ? 'text-red-500' : 'text-gray-500'}`}>Target Region</label>
                                        <div className="relative">
                                            <select 
                                                value={marketData.selectedContinent} 
                                                onChange={handleRegionChange}
                                                className={`w-full pl-3 pr-8 py-2.5 border rounded-lg text-sm focus:ring-2 outline-none appearance-none bg-white text-gray-700 ${
                                                    errors.region 
                                                    ? 'border-red-300 focus:ring-red-200 focus:border-red-500' 
                                                    : 'border-gray-300 focus:ring-blue-500 hover:border-blue-300'
                                                }`}
                                            >
                                                <option value="">-- Select Region --</option>
                                                {Object.keys(CONTINENTS).map(c => <option key={c} value={c}>{c}</option>)}
                                            </select>
                                            <ChevronDown className="absolute right-3 top-3 text-gray-400 pointer-events-none" size={16} />
                                        </div>
                                        {errors.region && <p className="text-xs text-red-500 mt-1 animate-fadeIn flex items-center gap-1"><span className="font-bold">!</span> {errors.region}</p>}
                                    </div>
                                    
                                    {marketData.selectedContinent && (
                                        <div className="mt-3 animate-fadeIn">
                                            <MultiSelectDropdown 
                                                label={`Specific Countries in ${marketData.selectedContinent}`}
                                                options={CONTINENTS[marketData.selectedContinent]} 
                                                selected={marketData.selectedCountries} 
                                                onChange={(item) => setMarketData({...marketData, selectedCountries: toggleSelection(marketData.selectedCountries, item)})} 
                                            />
                                        </div>
                                    )}
                                </div>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <CheckboxGroup label="Gender" options={GENDERS} selected={marketData.selectedGenders} onChange={(i) => setMarketData({...marketData, selectedGenders: toggleSelection(marketData.selectedGenders, i)})} />
                                    <CheckboxGroup label="Income Group" options={INCOME_GROUPS} selected={marketData.selectedIncome} onChange={(i) => setMarketData({...marketData, selectedIncome: toggleSelection(marketData.selectedIncome, i)})} />
                                </div>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    {/* Replaced CheckboxGroup with MultiSelectDropdown for Personas */}
                                    <MultiSelectDropdown 
                                        label="Target Persona" 
                                        options={PERSONAS} 
                                        selected={marketData.selectedPersonas} 
                                        onChange={(i) => setMarketData({...marketData, selectedPersonas: toggleSelection(marketData.selectedPersonas, i)})} 
                                    />
                                    <CheckboxGroup label="Target Languages" options={LANGUAGES} selected={marketData.selectedLanguages} onChange={(i) => setMarketData({...marketData, selectedLanguages: toggleSelection(marketData.selectedLanguages, i)})} />
                                </div>

                                {/* HS CODE INTELLIGENCE SECTION */}
                                <div className="bg-slate-100 border border-slate-200 p-4 rounded-lg mt-2">
                                    <h3 className="text-sm font-bold text-slate-800 flex items-center gap-2 mb-3 uppercase tracking-wider"><Search size={14} /> HS Code Intelligence</h3>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label className="block text-xs font-bold text-gray-500 uppercase mb-1">Product Description for HS Lookup</label>
                                            <div className="flex gap-2">
                                                <input 
                                                    className="w-full p-2 border border-gray-300 rounded-lg text-sm" 
                                                    placeholder="e.g. USB Cable, Leather Case"
                                                    value={marketData.hsSearchQuery}
                                                    onChange={(e) => setMarketData({...marketData, hsSearchQuery: e.target.value})}
                                                />
                                                <button 
                                                    onClick={identifyHSCode} 
                                                    disabled={isAnalyzingHS}
                                                    className="bg-purple-600 text-white px-3 rounded-lg hover:bg-purple-700 transition-colors min-w-[50px] flex items-center justify-center" 
                                                    title="AI Auto-Identify"
                                                >
                                                    {isAnalyzingHS ? <Loader className="animate-spin" size={16} /> : <MagicWand size={16} />}
                                                </button>
                                            </div>
                                        </div>
                                        <div>
                                            <label className="block text-xs font-bold text-gray-500 uppercase mb-1">Detected HS Code</label>
                                            <input 
                                                className="w-full p-2 border border-gray-300 rounded-lg text-sm bg-white font-mono text-blue-800 font-bold" 
                                                placeholder="0000.00.00"
                                                value={marketData.hsCode}
                                                onChange={(e) => setMarketData({...marketData, hsCode: e.target.value})}
                                            />
                                            <p className="text-xs text-gray-400 mt-1">Required for accurate AI Market Reports.</p>
                                        </div>
                                    </div>
                                </div>

                                <div className="flex gap-4 border-t pt-4">
                                    <button onClick={generateResearchStrategy} className="w-1/2 bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-bold">1. Build Strategy</button>
                                    <button onClick={generateAIReport} className="w-1/2 bg-purple-600 text-white px-4 py-2 rounded-lg text-sm font-bold">2. AI Generated Report</button>
                                </div>
                                {marketData.analysis && <textarea className="w-full p-3 border rounded-lg bg-blue-50 text-sm h-64 mt-4" value={marketData.analysis} readOnly />}
                                {marketData.researchPrompt && <textarea className="w-full p-3 border rounded-lg bg-purple-50 text-sm h-64 mt-4" value={marketData.researchPrompt} readOnly />}
                            </div>
                        </div>
                    );
                    case 3: return (
                        <div className="p-6 overflow-y-auto h-full step-content">
                            <h2 className="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2"><Wrench className="text-blue-600"/> Engineering Specs</h2>
                            <div className="bg-white p-6 rounded-xl border border-gray-200 shadow-sm space-y-4">
                                
                                {/* Product Category Selector */}
                                <div className="mb-6 bg-blue-50 p-4 rounded-lg border border-blue-100 grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label className={`block text-xs font-bold mb-1 uppercase tracking-wider ${errors.category ? 'text-red-600' : 'text-blue-900'}`}>Industry / Main Category</label>
                                        <select 
                                            value={mainCategory} 
                                            onChange={handleMainCategoryChange}
                                            className={`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none bg-white font-medium text-gray-700 ${errors.category ? 'border-red-300' : 'border-blue-300'}`}
                                        >
                                            <option value="">-- Select Industry --</option>
                                            {Object.keys(PRODUCT_CATEGORIES).map(cat => (
                                                <option key={cat} value={cat}>{cat}</option>
                                            ))}
                                        </select>
                                    </div>
                                    <div>
                                        <label className={`block text-xs font-bold mb-1 uppercase tracking-wider ${errors.category ? 'text-red-600' : 'text-blue-900'}`}>Product Type</label>
                                        <select 
                                            value={subCategory} 
                                            onChange={handleSubCategoryChange}
                                            className={`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none bg-white font-medium text-gray-700 ${errors.category ? 'border-red-300' : 'border-blue-300'}`}
                                            disabled={!mainCategory}
                                        >
                                            <option value="">-- Select Type --</option>
                                            {mainCategory && PRODUCT_CATEGORIES[mainCategory] && Object.keys(PRODUCT_CATEGORIES[mainCategory]).map(group => (
                                                <optgroup key={group} label={group}>
                                                    {PRODUCT_CATEGORIES[mainCategory][group].map(item => (
                                                        <option key={item} value={item}>{item}</option>
                                                    ))}
                                                </optgroup>
                                            ))}
                                        </select>
                                    </div>
                                </div>

                                {/* DYNAMIC FIELDS RENDER LOGIC */}
                                {(() => {
                                    // Robustness Check: If no subcategory is selected, show prompt
                                    if (!subCategory || subCategory === "") {
                                        return (
                                            <div className="col-span-2 p-12 text-center border-2 border-dashed border-gray-300 rounded-xl bg-gray-50">
                                                <div className="inline-flex items-center justify-center w-12 h-12 rounded-full bg-gray-200 text-gray-400 mb-3">
                                                    <Wrench size={24} />
                                                </div>
                                                <h3 className="text-gray-600 font-bold">No Product Type Selected</h3>
                                                <p className="text-gray-400 text-sm mt-1">Please select an Industry and Product Type above to unlock the engineering specifications.</p>
                                            </div>
                                        );
                                    }

                                    // --- ELECTRONICS LOGIC ---
                                    if (subCategory === "USB Cable") return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Connector Type" name="connectorType" value={specsData.connectorType} onChange={handleSpecsChange} error={specErrors.connectorType} placeholder="e.g. USB-C to Lightning" />
                                                <InputField label="Cable Length" name="length" value={specsData.length} onChange={handleSpecsChange} error={specErrors.length} placeholder="e.g. 1.2 Meters (4ft)" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Power Output" name="powerOutput" value={specsData.powerOutput} onChange={handleSpecsChange} error={specErrors.powerOutput} placeholder="e.g. 20W PD, 2.4A Max" />
                                                <InputField label="Data Transfer" name="transferSpeed" value={specsData.transferSpeed} onChange={handleSpecsChange} error={specErrors.transferSpeed} placeholder="e.g. 480 Mbps (USB 2.0)" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Bend Lifespan" name="bendLifespan" value={specsData.bendLifespan} onChange={handleSpecsChange} error={specErrors.bendLifespan} placeholder="e.g. 15,000+ Bends" />
                                                <InputField label="CarPlay Support" name="carplay" value={specsData.carplay} onChange={handleSpecsChange} error={specErrors.carplay} placeholder="e.g. Yes, Full Data Sync" />
                                            </div>
                                        </>
                                    );
                                    // ... (Previous Electronics Cases: Power Bank, Wall Charger, Headphones, Protective Case) ...
                                    if (subCategory === "Power Bank") return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Battery Capacity" name="batteryCapacity" value={specsData.batteryCapacity} onChange={handleSpecsChange} error={specErrors.batteryCapacity} placeholder="e.g. 10,000mAh / 37Wh" />
                                                <InputField label="Total Wattage" name="totalWattage" value={specsData.totalWattage} onChange={handleSpecsChange} error={specErrors.totalWattage} placeholder="e.g. 20W PD Output" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Ports (Input/Output)" name="ports" value={specsData.ports} onChange={handleSpecsChange} error={specErrors.ports} placeholder="e.g. 1x USB-C (In/Out), 1x USB-A (Out)" />
                                                <InputField label="Recharge Time" name="inputTime" value={specsData.inputTime} onChange={handleSpecsChange} error={specErrors.inputTime} placeholder="e.g. 3.5 Hours via 18W Adapter" />
                                            </div>
                                        </>
                                    );
                                    if (subCategory === "Wall Charger") return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Total Wattage" name="totalWattage" value={specsData.totalWattage} onChange={handleSpecsChange} error={specErrors.totalWattage} placeholder="e.g. 65W Max" />
                                                <InputField label="GaN Technology" name="ganTech" value={specsData.ganTech} onChange={handleSpecsChange} error={specErrors.ganTech} placeholder="e.g. Yes, GaN II Chipset" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Number of Ports" name="ports" value={specsData.ports} onChange={handleSpecsChange} error={specErrors.ports} placeholder="e.g. 2x USB-C, 1x USB-A" />
                                                <InputField label="Plug Type" name="plugType" value={specsData.plugType} onChange={handleSpecsChange} error={specErrors.plugType} placeholder="e.g. US Foldable Plug" />
                                            </div>
                                        </>
                                    );
                                    if (["Headphones", "Bluetooth Speakers"].includes(subCategory)) return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Connection Type" name="connectionType" value={specsData.connectionType} onChange={handleSpecsChange} error={specErrors.connectionType} placeholder="e.g. Bluetooth 5.3" />
                                                <InputField label="Battery Life" name="batteryLife" value={specsData.batteryLife} onChange={handleSpecsChange} error={specErrors.batteryLife} placeholder="e.g. 30 Hours (ANC Off)" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Active Noise Cancellation" name="noiseCancellation" value={specsData.noiseCancellation} onChange={handleSpecsChange} error={specErrors.noiseCancellation} placeholder="e.g. Hybrid ANC (-35dB)" />
                                                <InputField label="Driver Size" name="driverSize" value={specsData.driverSize} onChange={handleSpecsChange} error={specErrors.driverSize} placeholder="e.g. 10mm Dynamic Drivers" />
                                            </div>
                                        </>
                                    );
                                    if (subCategory === "Protective Case") return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Material" name="material" value={specsData.material} onChange={handleSpecsChange} error={specErrors.material} placeholder="e.g. Full-Grain Leather / TPU" />
                                                <InputField label="Drop Protection" name="dropProtection" value={specsData.dropProtection} onChange={handleSpecsChange} error={specErrors.dropProtection} placeholder="e.g. 10ft / 3m Military Grade" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="MagSafe Compatible" name="magSafe" value={specsData.magSafe} onChange={handleSpecsChange} error={specErrors.magSafe} placeholder="e.g. Yes, N52 Magnets" />
                                                <InputField label="Thickness" name="thickness" value={specsData.thickness} onChange={handleSpecsChange} error={specErrors.thickness} placeholder="e.g. 1.5mm Slim Profile" />
                                            </div>
                                        </>
                                    );

                                    // --- NEW: WEARABLE & APPLIANCES (ELECTRONICS) ---
                                    if (["Smartwatches", "Fitness Trackers", "VR Headsets"].includes(subCategory)) return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Connectivity" name="connectivity" value={specsData.connectivity} onChange={handleSpecsChange} error={specErrors.connectivity} placeholder="e.g. Bluetooth 5.0, WiFi, LTE" />
                                                <InputField label="Battery Life" name="batteryLife" value={specsData.batteryLife} onChange={handleSpecsChange} error={specErrors.batteryLife} placeholder="e.g. 18 Hours, 7 Days" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Sensors" name="sensor" value={specsData.sensor} onChange={handleSpecsChange} error={specErrors.sensor} placeholder="e.g. Heart Rate, SpO2, GPS" />
                                                <InputField label="Water Resistance" name="waterproofRating" value={specsData.waterproofRating} onChange={handleSpecsChange} error={specErrors.waterproofRating} placeholder="e.g. 5 ATM, IP68" />
                                            </div>
                                        </>
                                    );
                                    if (["Smart Plugs", "Smart Lights", "Security Cameras", "Robot Vacuums", "Home Appliances"].includes(subCategory)) return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Voltage / Power" name="voltage" value={specsData.voltage} onChange={handleSpecsChange} error={specErrors.voltage} placeholder="e.g. 110-240V, 10A" />
                                                <InputField label="Connectivity" name="connectivity" value={specsData.connectivity} onChange={handleSpecsChange} error={specErrors.connectivity} placeholder="e.g. WiFi 2.4GHz, Zigbee" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="App Compatibility" name="appControl" value={specsData.appControl} onChange={handleSpecsChange} error={specErrors.appControl} placeholder="e.g. iOS, Android, Alexa, Google Home" />
                                                <InputField label="Power Source" name="powerSource" value={specsData.powerSource} onChange={handleSpecsChange} error={specErrors.powerSource} placeholder="e.g. AC Adapter, Rechargeable Battery" />
                                            </div>
                                        </>
                                    );
                                    if (["Laptops", "Tablets", "Computers", "Monitors", "Projectors", "Technology"].includes(subCategory)) return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Processor / Chipset" name="processor" value={specsData.processor} onChange={handleSpecsChange} error={specErrors.processor} placeholder="e.g. M2 Chip, Intel i7" />
                                                <InputField label="RAM / Storage" name="ram" value={specsData.ram} onChange={handleSpecsChange} error={specErrors.ram} placeholder="e.g. 16GB RAM / 512GB SSD" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Screen Size & Resolution" name="resolution" value={specsData.resolution} onChange={handleSpecsChange} error={specErrors.resolution} placeholder="e.g. 13.3 inch Retina Display" />
                                                <InputField label="Battery Life / Power" name="batteryLife" value={specsData.batteryLife} onChange={handleSpecsChange} error={specErrors.batteryLife} placeholder="e.g. Up to 18 hours" />
                                            </div>
                                        </>
                                    );

                                    // --- NEW: FOOTWEAR & ACTIVEWEAR (CLOTHING) ---
                                    if (["Sneakers", "Boots", "Sandals", "Formal Shoes", "Footwear"].includes(subCategory)) return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Upper Material" name="material" value={specsData.material} onChange={handleSpecsChange} error={specErrors.material} placeholder="e.g. Genuine Leather, Mesh" />
                                                <InputField label="Sole Material" name="soleMaterial" value={specsData.soleMaterial} onChange={handleSpecsChange} error={specErrors.soleMaterial} placeholder="e.g. Rubber, EVA, Leather" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Size Range" name="shoeSize" value={specsData.shoeSize} onChange={handleSpecsChange} error={specErrors.shoeSize} placeholder="e.g. US 7-13, EU 40-46" />
                                                <InputField label="Closure Type" name="fit" value={specsData.fit} onChange={handleSpecsChange} error={specErrors.fit} placeholder="e.g. Lace-up, Velcro, Slip-on" />
                                            </div>
                                        </>
                                    );
                                    if (["Activewear", "Workout Clothes", "Joggers", "Sports Bras"].includes(subCategory)) return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Fabric Technology" name="fabric" value={specsData.fabric} onChange={handleSpecsChange} error={specErrors.fabric} placeholder="e.g. Moisture Wicking, 4-Way Stretch" />
                                                <InputField label="Fit Type" name="fit" value={specsData.fit} onChange={handleSpecsChange} error={specErrors.fit} placeholder="e.g. Compression, Loose Fit" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Care" name="careInstructions" value={specsData.careInstructions} onChange={handleSpecsChange} error={specErrors.careInstructions} placeholder="e.g. Machine Wash Cold" />
                                                <InputField label="Activity Level" name="durability" value={specsData.durability} onChange={handleSpecsChange} error={specErrors.durability} placeholder="e.g. High Impact, Yoga" />
                                            </div>
                                        </>
                                    );
                                    // --- CLOTHING GENERIC ---
                                    if (mainCategory === "Clothing & Accessories") return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Fabric Composition" name="fabric" value={specsData.fabric} onChange={handleSpecsChange} error={specErrors.fabric} placeholder="e.g. 100% Cotton" />
                                                <InputField label="Size Range" name="size" value={specsData.size} onChange={handleSpecsChange} error={specErrors.size} placeholder="e.g. XS - XXL" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Care Instructions" name="careInstructions" value={specsData.careInstructions} onChange={handleSpecsChange} error={specErrors.careInstructions} placeholder="e.g. Dry Clean Only" />
                                                <InputField label="Fit" name="fit" value={specsData.fit} onChange={handleSpecsChange} error={specErrors.fit} placeholder="e.g. Slim" />
                                            </div>
                                        </>
                                    );

                                    // --- NEW: HOME DECOR & BEDDING ---
                                    if (["Pillows", "Mattress Toppers", "Sheets", "Bedding & Mattresses", "Bed Frames"].includes(subCategory)) return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Material / Thread Count" name="material" value={specsData.material} onChange={handleSpecsChange} error={specErrors.material} placeholder="e.g. 100% Egyptian Cotton, 400TC" />
                                                <InputField label="Size Dimensions" name="packagingDimensions" value={specsData.packagingDimensions} onChange={handleSpecsChange} error={specErrors.packagingDimensions} placeholder="e.g. Queen (60x80 in)" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Care Instructions" name="careInstructions" value={specsData.careInstructions} onChange={handleSpecsChange} error={specErrors.careInstructions} placeholder="e.g. Machine Washable" />
                                                <InputField label="Hypoallergenic" name="safety" value={specsData.safety} onChange={handleSpecsChange} error={specErrors.safety} placeholder="e.g. Yes, Dust Mite Resistant" />
                                            </div>
                                        </>
                                    );
                                    if (["Wall Art", "Rugs", "Lighting", "Home Decor", "Mirrors"].includes(subCategory)) return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Dimensions" name="packagingDimensions" value={specsData.packagingDimensions} onChange={handleSpecsChange} error={specErrors.packagingDimensions} placeholder="e.g. 5x7 ft (Rug), 24x36 in (Art)" />
                                                <InputField label="Material" name="material" value={specsData.material} onChange={handleSpecsChange} error={specErrors.material} placeholder="e.g. Wool, Canvas, Metal" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Style" name="style" value={specsData.style} onChange={handleSpecsChange} error={specErrors.style} placeholder="e.g. Modern, Industrial, Boho" />
                                                <InputField label="Mounting/Install" name="installation" value={specsData.installation} onChange={handleSpecsChange} error={specErrors.installation} placeholder="e.g. Wall Mount Hardware Included" />
                                            </div>
                                        </>
                                    );
                                    // --- FURNITURE GENERIC ---
                                    if (mainCategory === "Home & Garden") return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Primary Material" name="material" value={specsData.material} onChange={handleSpecsChange} error={specErrors.material} placeholder="e.g. Solid Oak, Metal Frame" />
                                                <InputField label="Assembly Required" name="assemblyRequired" value={specsData.assemblyRequired} onChange={handleSpecsChange} error={specErrors.assemblyRequired} placeholder="e.g. Yes, Tools Included" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Dimensions" name="packagingDimensions" value={specsData.packagingDimensions} onChange={handleSpecsChange} error={specErrors.packagingDimensions} placeholder="e.g. 80 x 40 x 30 inches" />
                                                <InputField label="Max Load" name="maxLoad" value={specsData.maxLoad} onChange={handleSpecsChange} error={specErrors.maxLoad} placeholder="e.g. 300 lbs" />
                                            </div>
                                        </>
                                    );

                                    // --- NEW: OUTDOOR ADVENTURE & WATER SPORTS ---
                                    if (["Tents", "Sleeping Bags", "Hiking Gear", "Camping", "Outdoor Adventure", "Climbing Equipment", "Fishing Rods"].includes(subCategory)) return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Capacity / Size" name="capacity" value={specsData.capacity} onChange={handleSpecsChange} error={specErrors.capacity} placeholder="e.g. 4 Person, 20L Backpack" />
                                                <InputField label="Weight" name="weight" value={specsData.weight} onChange={handleSpecsChange} error={specErrors.weight} placeholder="e.g. 2.5kg (Ultralight)" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Material / Weather Rating" name="material" value={specsData.material} onChange={handleSpecsChange} error={specErrors.material} placeholder="e.g. 20D Nylon, 3 Season" />
                                                <InputField label="Waterproof Rating" name="waterproofRating" value={specsData.waterproofRating} onChange={handleSpecsChange} error={specErrors.waterproofRating} placeholder="e.g. 3000mm PU Coating" />
                                            </div>
                                        </>
                                    );
                                    if (["Kayaks", "Surfboards", "Paddleboards", "Water Sports", "Swimwear"].includes(subCategory)) return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Dimensions" name="packagingDimensions" value={specsData.packagingDimensions} onChange={handleSpecsChange} error={specErrors.packagingDimensions} placeholder="e.g. 10.5ft x 32in x 6in" />
                                                <InputField label="Weight Capacity" name="maxLoad" value={specsData.maxLoad} onChange={handleSpecsChange} error={specErrors.maxLoad} placeholder="e.g. 250 lbs" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Material" name="material" value={specsData.material} onChange={handleSpecsChange} error={specErrors.material} placeholder="e.g. Inflatable PVC, Epoxy" />
                                                <InputField label="Accessories Included" name="compatibility" value={specsData.compatibility} onChange={handleSpecsChange} error={specErrors.compatibility} placeholder="e.g. Paddle, Pump, Leash" />
                                            </div>
                                        </>
                                    );

                                    // --- NEW: FRAGRANCES & BEAUTY TOOLS ---
                                    if (["Men's Fragrance", "Women's Fragrance", "Perfume Sets", "Fragrances"].includes(subCategory)) return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Volume" name="volume" value={specsData.volume} onChange={handleSpecsChange} error={specErrors.volume} placeholder="e.g. 100ml / 3.4oz" />
                                                <InputField label="Concentration" name="concentration" value={specsData.concentration} onChange={handleSpecsChange} error={specErrors.concentration} placeholder="e.g. Eau de Parfum (EDP)" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Scent Notes (Top/Mid/Base)" name="scentNotes" value={specsData.scentNotes} onChange={handleSpecsChange} error={specErrors.scentNotes} placeholder="e.g. Bergamot, Leather, Cedarwood" />
                                                <InputField label="Scent Family" name="scent" value={specsData.scent} onChange={handleSpecsChange} error={specErrors.scent} placeholder="e.g. Woody, Floral, Fresh" />
                                            </div>
                                        </>
                                    );
                                    if (["Brushes", "Combs", "Hair Dryers", "Styling Tools", "Tools & Accessories"].includes(subCategory)) return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Power / Heat Settings" name="voltage" value={specsData.voltage} onChange={handleSpecsChange} error={specErrors.voltage} placeholder="e.g. 1875W, 3 Heat/2 Speed" />
                                                <InputField label="Material" name="material" value={specsData.material} onChange={handleSpecsChange} error={specErrors.material} placeholder="e.g. Ceramic Tourmaline, Boar Bristle" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Cord Length/Power" name="powerSource" value={specsData.powerSource} onChange={handleSpecsChange} error={specErrors.powerSource} placeholder="e.g. 9ft Cord, Battery Operated" />
                                                <InputField label="Features" name="compatibility" value={specsData.compatibility} onChange={handleSpecsChange} error={specErrors.compatibility} placeholder="e.g. Ionic Technology, Cool Shot" />
                                            </div>
                                        </>
                                    );
                                    // --- BEAUTY GENERIC ---
                                    if (mainCategory === "Beauty & Personal Care") return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Skin Type" name="skinType" value={specsData.skinType} onChange={handleSpecsChange} error={specErrors.skinType} placeholder="e.g. Oily, Sensitive" />
                                                <InputField label="Volume" name="volume" value={specsData.volume} onChange={handleSpecsChange} error={specErrors.volume} placeholder="e.g. 50ml" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Active Ingredients" name="activeIngredients" value={specsData.activeIngredients} onChange={handleSpecsChange} error={specErrors.activeIngredients} placeholder="e.g. Vitamin C, Retinol" />
                                                <InputField label="Benefits" name="compatibility" value={specsData.compatibility} onChange={handleSpecsChange} error={specErrors.compatibility} placeholder="e.g. Anti-Aging, Hydrating" />
                                            </div>
                                        </>
                                    );

                                    // --- NEW: AUTOMOTIVE MAINTENANCE & TIRES ---
                                    if (["Car Maintenance Tools", "Engine Diagnostics", "Fluids", "Tools & Equipment"].includes(subCategory)) return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Application/Usage" name="compatibility" value={specsData.compatibility} onChange={handleSpecsChange} error={specErrors.compatibility} placeholder="e.g. OBDII Port, Engine Oil" />
                                                <InputField label="Volume / Size" name="volume" value={specsData.volume} onChange={handleSpecsChange} error={specErrors.volume} placeholder="e.g. 5 Quarts, Handheld" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Certification" name="certification" value={specsData.certification} onChange={handleSpecsChange} error={specErrors.certification} placeholder="e.g. API SN, CE" />
                                                <InputField label="Material" name="material" value={specsData.material} onChange={handleSpecsChange} error={specErrors.material} placeholder="e.g. Synthetic Blend, Steel" />
                                            </div>
                                        </>
                                    );
                                    if (["Tire Inflators", "Chains", "Wheel Covers", "Tire & Wheel"].includes(subCategory)) return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Rim/Tire Size" name="size" value={specsData.size} onChange={handleSpecsChange} error={specErrors.size} placeholder="e.g. 16-18 inch, 225/45R17" />
                                                <InputField label="Material" name="material" value={specsData.material} onChange={handleSpecsChange} error={specErrors.material} placeholder="e.g. Alloy, Steel Chain" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Max Pressure / Load" name="maxLoad" value={specsData.maxLoad} onChange={handleSpecsChange} error={specErrors.maxLoad} placeholder="e.g. 150 PSI, 800kg" />
                                                <InputField label="Power Source (if inflator)" name="powerSource" value={specsData.powerSource} onChange={handleSpecsChange} error={specErrors.powerSource} placeholder="e.g. 12V DC Car Plug" />
                                            </div>
                                        </>
                                    );
                                    // --- AUTOMOTIVE GENERIC ---
                                    if (mainCategory === "Automotive") return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Vehicle Fitment" name="vehicle" value={specsData.vehicle} onChange={handleSpecsChange} error={specErrors.vehicle} placeholder="e.g. Universal, Ford F-150" />
                                                <InputField label="Part Number" name="partNumber" value={specsData.partNumber} onChange={handleSpecsChange} error={specErrors.partNumber} placeholder="e.g. 12345" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Material" name="material" value={specsData.material} onChange={handleSpecsChange} error={specErrors.material} placeholder="e.g. ABS Plastic" />
                                                <InputField label="Installation" name="installation" value={specsData.installation} onChange={handleSpecsChange} error={specErrors.installation} placeholder="e.g. DIY, Easy Install" />
                                            </div>
                                        </>
                                    );

                                    // --- NEW: HEALTH FOODS & SPECIALTY DIETS ---
                                    if (["Protein Powders", "Meal Replacements", "Health Foods", "Specialty Diets", "Gluten-Free", "Keto", "Vegan", "Organic"].includes(subCategory)) return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Protein per Serving" name="nutritionalValue" value={specsData.nutritionalValue} onChange={handleSpecsChange} error={specErrors.nutritionalValue} placeholder="e.g. 24g Protein" />
                                                <InputField label="Flavor" name="flavor" value={specsData.flavor} onChange={handleSpecsChange} error={specErrors.flavor} placeholder="e.g. Chocolate Fudge" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Dietary Certs" name="certification" value={specsData.certification} onChange={handleSpecsChange} error={specErrors.certification} placeholder="e.g. Non-GMO, Gluten Free" />
                                                <InputField label="Weight/Servings" name="volume" value={specsData.volume} onChange={handleSpecsChange} error={specErrors.volume} placeholder="e.g. 5lbs / 70 Servings" />
                                            </div>
                                        </>
                                    );
                                    // --- FOOD GENERIC ---
                                    if (mainCategory === "Food & Beverage") return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Ingredients" name="ingredients" value={specsData.ingredients} onChange={handleSpecsChange} error={specErrors.ingredients} placeholder="e.g. Whole Grain Oats" />
                                                <InputField label="Shelf Life" name="shelfLife" value={specsData.shelfLife} onChange={handleSpecsChange} error={specErrors.shelfLife} placeholder="e.g. 18 Months" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Origin" name="origin" value={specsData.origin} onChange={handleSpecsChange} error={specErrors.origin} placeholder="e.g. USA" />
                                                <InputField label="Net Weight" name="volume" value={specsData.volume} onChange={handleSpecsChange} error={specErrors.volume} placeholder="e.g. 500g" />
                                            </div>
                                        </>
                                    );

                                    // --- NEW: EDUCATIONAL & OUTDOOR TOYS ---
                                    if (["STEM Kits", "Learning Games", "Montessori", "Educational"].includes(subCategory)) return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Age Recommendation" name="ageGroup" value={specsData.ageGroup} onChange={handleSpecsChange} error={specErrors.ageGroup} placeholder="e.g. 8-12 Years" />
                                                <InputField label="Educational Focus" name="educationalFocus" value={specsData.educationalFocus} onChange={handleSpecsChange} error={specErrors.educationalFocus} placeholder="e.g. Coding, Physics, Math" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Material" name="material" value={specsData.material} onChange={handleSpecsChange} error={specErrors.material} placeholder="e.g. Wood, Non-Toxic Plastic" />
                                                <InputField label="Pieces" name="pieces" value={specsData.pieces} onChange={handleSpecsChange} error={specErrors.pieces} placeholder="e.g. 200 Components" />
                                            </div>
                                        </>
                                    );
                                    if (["Sports Toys", "Water Toys", "Sandboxes", "Outdoor Play", "Outdoor Toys"].includes(subCategory)) return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Dimensions (Assembled)" name="packagingDimensions" value={specsData.packagingDimensions} onChange={handleSpecsChange} error={specErrors.packagingDimensions} placeholder="e.g. 4x4 ft" />
                                                <InputField label="Weight Limit" name="maxLoad" value={specsData.maxLoad} onChange={handleSpecsChange} error={specErrors.maxLoad} placeholder="e.g. 100 lbs" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Material" name="material" value={specsData.material} onChange={handleSpecsChange} error={specErrors.material} placeholder="e.g. UV Resistant Plastic" />
                                                <InputField label="Assembly" name="assemblyRequired" value={specsData.assemblyRequired} onChange={handleSpecsChange} error={specErrors.assemblyRequired} placeholder="e.g. Adult Assembly Required" />
                                            </div>
                                        </>
                                    );
                                    // --- TOYS GENERIC ---
                                    if (mainCategory === "Toys & Games") return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Age Group" name="ageGroup" value={specsData.ageGroup} onChange={handleSpecsChange} error={specErrors.ageGroup} placeholder="e.g. 3+" />
                                                <InputField label="Material" name="material" value={specsData.material} onChange={handleSpecsChange} error={specErrors.material} placeholder="e.g. Plastic" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Safety Standards" name="safety" value={specsData.safety} onChange={handleSpecsChange} error={specErrors.safety} placeholder="e.g. ASTM F963" />
                                                <InputField label="Battery Required" name="powerSource" value={specsData.powerSource} onChange={handleSpecsChange} error={specErrors.powerSource} placeholder="e.g. 2x AA (Not Included)" />
                                            </div>
                                        </>
                                    );

                                    // --- NEW: DIGITAL & KIDS BOOKS ---
                                    if (["Ebooks", "Audiobooks", "Digital"].includes(subCategory)) return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="File Format" name="format" value={specsData.format} onChange={handleSpecsChange} error={specErrors.format} placeholder="e.g. PDF, EPUB, MP3" />
                                                <InputField label="File Size / Duration" name="volume" value={specsData.volume} onChange={handleSpecsChange} error={specErrors.volume} placeholder="e.g. 150MB, 8 Hours" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Author" name="author" value={specsData.author} onChange={handleSpecsChange} error={specErrors.author} placeholder="Author Name" />
                                                <InputField label="Narrator (if Audio)" name="partNumber" value={specsData.partNumber} onChange={handleSpecsChange} error={specErrors.partNumber} placeholder="Narrator Name" />
                                            </div>
                                        </>
                                    );
                                    if (["Picture Books", "Early Readers", "Young Adult", "Kids", "Kids' Books"].includes(subCategory)) return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Age Range" name="ageGroup" value={specsData.ageGroup} onChange={handleSpecsChange} error={specErrors.ageGroup} placeholder="e.g. 3-5 Years" />
                                                <InputField label="Illustrator" name="educationalFocus" value={specsData.educationalFocus} onChange={handleSpecsChange} error={specErrors.educationalFocus} placeholder="Illustrator Name" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Page Count" name="pages" value={specsData.pages} onChange={handleSpecsChange} error={specErrors.pages} placeholder="e.g. 32 Pages" />
                                                <InputField label="Binding" name="material" value={specsData.material} onChange={handleSpecsChange} error={specErrors.material} placeholder="e.g. Board Book, Hardcover" />
                                            </div>
                                        </>
                                    );
                                    // --- BOOKS GENERIC ---
                                    if (mainCategory === "Books") return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Author" name="author" value={specsData.author} onChange={handleSpecsChange} error={specErrors.author} placeholder="Author Name" />
                                                <InputField label="ISBN" name="isbn" value={specsData.isbn} onChange={handleSpecsChange} error={specErrors.isbn} placeholder="e.g. 978-3-16-148410-0" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Format" name="format" value={specsData.format} onChange={handleSpecsChange} error={specErrors.format} placeholder="e.g. Hardcover, Paperback" />
                                                <InputField label="Pages" name="pages" value={specsData.pages} onChange={handleSpecsChange} error={specErrors.pages} placeholder="e.g. 350" />
                                            </div>
                                        </>
                                    );

                                    // --- NEW: MEDICAL & STORAGE ---
                                    if (["First Aid", "Medical Supplies", "Health Care"].includes(subCategory)) return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Sterility" name="safety" value={specsData.safety} onChange={handleSpecsChange} error={specErrors.safety} placeholder="e.g. Sterile, Single Use" />
                                                <InputField label="Expiration" name="shelfLife" value={specsData.shelfLife} onChange={handleSpecsChange} error={specErrors.shelfLife} placeholder="e.g. 3 Years" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Certifications" name="certification" value={specsData.certification} onChange={handleSpecsChange} error={specErrors.certification} placeholder="e.g. FDA Approved, CE" />
                                                <InputField label="Contents" name="activeIngredients" value={specsData.activeIngredients} onChange={handleSpecsChange} error={specErrors.activeIngredients} placeholder="e.g. Bandages, Antiseptic" />
                                            </div>
                                        </>
                                    );
                                    if (["Bins", "Organizers", "Shelving", "Household Storage", "Household Supplies"].includes(subCategory)) return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Load Capacity" name="maxLoad" value={specsData.maxLoad} onChange={handleSpecsChange} error={specErrors.maxLoad} placeholder="e.g. 50 lbs per shelf" />
                                                <InputField label="Dimensions" name="packagingDimensions" value={specsData.packagingDimensions} onChange={handleSpecsChange} error={specErrors.packagingDimensions} placeholder="e.g. 20x15x10 in" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Material" name="material" value={specsData.material} onChange={handleSpecsChange} error={specErrors.material} placeholder="e.g. Clear Plastic, Steel" />
                                                <InputField label="Stackable" name="installation" value={specsData.installation} onChange={handleSpecsChange} error={specErrors.installation} placeholder="e.g. Yes, Nesting Design" />
                                            </div>
                                        </>
                                    );
                                    // --- HEALTH GENERIC ---
                                    if (mainCategory === "Health & Household") return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Active Ingredient" name="activeIngredients" value={specsData.activeIngredients} onChange={handleSpecsChange} error={specErrors.activeIngredients} placeholder="e.g. Ibuprofen" />
                                                <InputField label="Pack Size" name="volume" value={specsData.volume} onChange={handleSpecsChange} error={specErrors.volume} placeholder="e.g. 100 Count" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Usage" name="careInstructions" value={specsData.careInstructions} onChange={handleSpecsChange} error={specErrors.careInstructions} placeholder="e.g. Daily" />
                                                <InputField label="Warnings" name="safety" value={specsData.safety} onChange={handleSpecsChange} error={specErrors.safety} placeholder="e.g. Keep out of reach of children" />
                                            </div>
                                        </>
                                    );

                                    // --- NEW: OFFICE TECH & EQUIPMENT ---
                                    if (["Printers", "Scanners", "Shredders", "Office Equipment"].includes(subCategory)) return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Speed / Capacity" name="powerOutput" value={specsData.powerOutput} onChange={handleSpecsChange} error={specErrors.powerOutput} placeholder="e.g. 20 Pages/Min, 10 Sheet" />
                                                <InputField label="Connectivity" name="connectivity" value={specsData.connectivity} onChange={handleSpecsChange} error={specErrors.connectivity} placeholder="e.g. WiFi, USB" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Power" name="voltage" value={specsData.voltage} onChange={handleSpecsChange} error={specErrors.voltage} placeholder="e.g. 120V AC" />
                                                <InputField label="Dimensions" name="packagingDimensions" value={specsData.packagingDimensions} onChange={handleSpecsChange} error={specErrors.packagingDimensions} placeholder="e.g. 15x10x10 in" />
                                            </div>
                                        </>
                                    );
                                    // --- OFFICE GENERIC ---
                                    if (mainCategory === "Office Supplies") return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Material" name="material" value={specsData.material} onChange={handleSpecsChange} error={specErrors.material} placeholder="e.g. Paper, Plastic" />
                                                <InputField label="Color" name="color" value={specsData.color} onChange={handleSpecsChange} error={specErrors.color} placeholder="e.g. Black, White" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Pack Quantity" name="volume" value={specsData.volume} onChange={handleSpecsChange} error={specErrors.volume} placeholder="e.g. 12 Pack" />
                                                <InputField label="Dimensions" name="packagingDimensions" value={specsData.packagingDimensions} onChange={handleSpecsChange} error={specErrors.packagingDimensions} placeholder="e.g. A4 Size" />
                                            </div>
                                        </>
                                    );

                                    // --- NEW: PET HEALTH & FURNITURE ---
                                    if (["Supplements", "Flea Treatment", "Pet Health"].includes(subCategory)) return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Active Ingredients" name="activeIngredients" value={specsData.activeIngredients} onChange={handleSpecsChange} error={specErrors.activeIngredients} placeholder="e.g. Glucosamine" />
                                                <InputField label="Dosage Form" name="format" value={specsData.format} onChange={handleSpecsChange} error={specErrors.format} placeholder="e.g. Chewable, Liquid" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Pet Weight/Size" name="breedSize" value={specsData.breedSize} onChange={handleSpecsChange} error={specErrors.breedSize} placeholder="e.g. 10-20 lbs" />
                                                <InputField label="Life Stage" name="lifeStage" value={specsData.lifeStage} onChange={handleSpecsChange} error={specErrors.lifeStage} placeholder="e.g. Adult, Senior" />
                                            </div>
                                        </>
                                    );
                                    if (["Beds", "Cages", "Crates", "Trees", "Pet Furniture"].includes(subCategory)) return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Dimensions" name="packagingDimensions" value={specsData.packagingDimensions} onChange={handleSpecsChange} error={specErrors.packagingDimensions} placeholder="e.g. 30x40 inches" />
                                                <InputField label="Material" name="material" value={specsData.material} onChange={handleSpecsChange} error={specErrors.material} placeholder="e.g. Memory Foam, Plush" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Washable Cover" name="careInstructions" value={specsData.careInstructions} onChange={handleSpecsChange} error={specErrors.careInstructions} placeholder="e.g. Yes, Machine Washable" />
                                                <InputField label="Assembly" name="assemblyRequired" value={specsData.assemblyRequired} onChange={handleSpecsChange} error={specErrors.assemblyRequired} placeholder="e.g. No Assembly" />
                                            </div>
                                        </>
                                    );
                                    // --- PETS GENERIC ---
                                    if (mainCategory === "Pets") return (
                                        <>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Life Stage" name="lifeStage" value={specsData.lifeStage} onChange={handleSpecsChange} error={specErrors.lifeStage} placeholder="e.g. Puppy" />
                                                <InputField label="Breed Size" name="breedSize" value={specsData.breedSize} onChange={handleSpecsChange} error={specErrors.breedSize} placeholder="e.g. All Breeds" />
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                                <InputField label="Material/Ingredients" name="material" value={specsData.material} onChange={handleSpecsChange} error={specErrors.material} placeholder="e.g. Chicken, Nylon" />
                                                <InputField label="Flavor/Color" name="flavor" value={specsData.flavor} onChange={handleSpecsChange} error={specErrors.flavor} placeholder="e.g. Beef" />
                                            </div>
                                        </>
                                    );

                                    // --- FALLBACK / GENERIC LOGIC ---
                                    return (
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn">
                                            <InputField label="Material / Composition" name="material" value={specsData.material} onChange={handleSpecsChange} error={specErrors.material} placeholder="e.g. Plastic, Cotton, Metal" />
                                            <InputField label="Key Feature / Specification" name="compatibility" value={specsData.compatibility} onChange={handleSpecsChange} error={specErrors.compatibility} placeholder="e.g. Primary specification" />
                                        </div>
                                    );
                                })()}

                                {/* Universal Specs (Always Visible) */}
                                <h3 className="text-xs font-bold text-gray-500 uppercase tracking-wider border-b pb-1 mt-4 mb-4">Universal Specifications</h3>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <InputField label="Color / Finish" name="color" value={specsData.color} onChange={handleSpecsChange} placeholder="e.g. Midnight Black" />
                                    <InputField label="Warranty" name="warranty" value={specsData.warranty} onChange={handleSpecsChange} placeholder="e.g. 1 Year" />
                                </div>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <InputField label="Certification/Standards" name="certification" value={specsData.certification} onChange={handleSpecsChange} placeholder="e.g. ISO 9001, CE, Organic" />
                                    <InputField label="Country of Origin" name="testLab" value={specsData.testLab} onChange={handleSpecsChange} placeholder="e.g. Made in USA" />
                                </div>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <InputField label="Packaging Dimensions" name="packagingDimensions" value={specsData.packagingDimensions} onChange={handleSpecsChange} placeholder="e.g. 10 x 5 x 2 cm" />
                                    <InputField label="Net Weight" name="weight" value={specsData.weight} onChange={handleSpecsChange} placeholder="e.g. 45g" />
                                </div>
                                <div className="grid grid-cols-1 gap-4">
                                    <InputField label="Eco-Friendly / Sustainability" name="eco" value={specsData.eco} onChange={handleSpecsChange} placeholder="e.g. Recyclable Packaging, Cruelty-Free" />
                                </div>
                            </div>
                        </div>
                    );
                    case 4: return (
                        <div className="p-6 overflow-y-auto h-full step-content">
                            <h2 className="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2"><Zap className="text-blue-600"/> Product Intelligence</h2>
                            <div className="bg-white p-6 rounded-xl border border-gray-200 shadow-sm space-y-4">
                                <InputField 
                                    label="Product Name" 
                                    name="productName" 
                                    value={productData.productName} 
                                    onChange={handleProductChange} 
                                    error={errors.productName}
                                    required
                                    icon={Zap}
                                    action={
                                        <button 
                                            onClick={generateSmartTitle} 
                                            disabled={isGeneratingTitle}
                                            className={`text-xs px-3 py-1.5 rounded-lg font-bold flex items-center gap-2 transition-all ${isGeneratingTitle ? 'bg-gray-100 text-gray-500 cursor-wait' : 'bg-blue-50 text-blue-600 hover:bg-blue-100 hover:text-blue-700'}`}
                                        >
                                            {isGeneratingTitle ? <><Loader size={14} className="animate-spin"/> Generating...</> : <><MagicWand size={14}/> AI Auto-Generate</>}
                                        </button>
                                    }
                                />
                                
                                <TextArea 
                                    label="Product Description" 
                                    name="description" 
                                    value={productData.description} 
                                    onChange={handleProductChange} 
                                    action={
                                        <button 
                                            onClick={generateSmartDescription} 
                                            disabled={isGeneratingDesc}
                                            className={`text-xs px-3 py-1.5 rounded-lg font-bold flex items-center gap-2 transition-all ${isGeneratingDesc ? 'bg-gray-100 text-gray-500 cursor-wait' : 'bg-blue-50 text-blue-600 hover:bg-blue-100 hover:text-blue-700'}`}
                                        >
                                            {isGeneratingDesc ? <><Loader size={14} className="animate-spin"/> Generating...</> : <><MagicWand size={14}/> AI Auto-Generate</>}
                                        </button>
                                    }
                                />
                                
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <InputField label="Brand Name" name="brandName" value={productData.brandName} onChange={handleProductChange} />
                                    <InputField label="SKU/MPN" name="sku" value={productData.sku} onChange={handleProductChange} />
                                </div>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <InputField label="Price" name="price" value={productData.price} onChange={handleProductChange} />
                                    <InputField label="Currency" name="currency" value={productData.currency} onChange={handleProductChange} />
                                </div>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <InputField label="Availability" name="availability" value={productData.availability} onChange={handleProductChange} />
                                    {/* NEW: Dynamic Product Category Dropdown */}
                                    <div>
                                        <div className="flex justify-between items-center mb-1">
                                            <label className="block text-xs font-bold text-gray-500 uppercase tracking-wider">Product Category</label>
                                        </div>
                                        <select 
                                            name="category" 
                                            value={productData.category} 
                                            onChange={handleProductChange}
                                            className="w-full pl-3 pr-8 py-2.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all hover:border-blue-300 bg-white text-gray-700"
                                        >
                                            <option value="">-- Select Category --</option>
                                            {Object.keys(PRODUCT_CATEGORIES).map(industry => (
                                                Object.keys(PRODUCT_CATEGORIES[industry]).map(subIndustry => (
                                                    <optgroup key={`${industry}-${subIndustry}`} label={`${industry} > ${subIndustry}`}>
                                                        {PRODUCT_CATEGORIES[industry][subIndustry].map(item => (
                                                            <option key={item} value={item}>{item}</option>
                                                        ))}
                                                    </optgroup>
                                                ))
                                            ))}
                                        </select>
                                    </div>
                                </div>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <InputField label="Weight" name="weight" value={productData.weight} onChange={handleProductChange} />
                                    <InputField label="Dimensions" name="dimensions" value={productData.dimensions} onChange={handleProductChange} />
                                </div>
                                
                                {/* UPDATED: Shipping Information Placeholder */}
                                <TextArea 
                                    label="Shipping Information" 
                                    name="shippingInfo" 
                                    value={productData.shippingInfo} 
                                    onChange={handleProductChange} 
                                    placeholder="e.g. Free Shipping on orders over $50. Ships within 24 hours via FedEx. International shipping available. 30-day return policy." 
                                />
                                
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <InputField label="Warranty" name="warranty" value={productData.warranty} onChange={handleProductChange} />
                                    <InputField label="Product Condition" name="condition" value={productData.condition} onChange={handleProductChange} />
                                </div>
                                <div className="grid grid-cols-1 gap-4">
                                    <InputField label="Product Type" name="productType" value={productData.productType} onChange={handleProductChange} />
                                </div>
                                <InputField 
                                    label="Product Tags (Comma Separated)" 
                                    name="productTags" 
                                    value={productData.productTags} 
                                    onChange={handleProductChange} 
                                    required={true}
                                    error={errors.productTags}
                                />
                            </div>
                        </div>
                    );
                    case 5: 
                        const { checks, score } = calculateSEOScore();
                        return (
                        <div className="p-6 overflow-y-auto h-full step-content">
                            <h2 className="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2"><PenTool className="text-blue-600"/> Content Engine</h2>
                            
                            {/* SEO SCORECARD */}
                            <div className="mb-6 bg-white border border-gray-200 rounded-xl p-4 shadow-sm">
                                <div className="flex justify-between items-center mb-3">
                                    <h3 className="text-sm font-bold text-gray-700 uppercase tracking-wider">Content Optimization Score</h3>
                                    <div className={`text-lg font-bold ${score === 100 ? 'text-green-600' : score > 50 ? 'text-yellow-600' : 'text-red-600'}`}>
                                        {score}% Ready
                                    </div>
                                </div>
                                <div className="w-full bg-gray-200 rounded-full h-2 mb-4">
                                    <div className={`h-2 rounded-full transition-all duration-500 ${score === 100 ? 'bg-green-500' : 'bg-blue-500'}`} style={{width: `${score}%`}}></div>
                                </div>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-2">
                                    {checks.map((check, i) => (
                                        <div key={i} className="flex items-center gap-2 text-xs">
                                            {check.valid ? <Check size={14} className="text-green-500"/> : <div className="w-3.5 h-3.5 rounded-full border border-gray-300"></div>}
                                            <span className={check.valid ? "text-gray-700" : "text-gray-400"}>{check.label}</span>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <div className="bg-white p-6 rounded-xl border border-gray-200 shadow-sm space-y-6">
                                <div className="bg-blue-50 p-4 rounded-lg border border-blue-100">
                                    <div className="flex justify-between items-center mb-3">
                                        <h3 className="text-sm font-bold text-blue-800 flex items-center gap-2"><Search size={14}/> Keyword Strategy</h3>
                                        <button onClick={autoGenerateKeywords} className="text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700">Auto-Generate Keywords</button>
                                    </div>
                                    <div className="grid grid-cols-1 gap-3 text-sm">
                                        <div>
                                            <span className="font-bold text-gray-600 block text-xs uppercase">Primary Keywords</span> 
                                            <span className="text-blue-700 font-mono">{marketData.primaryKeywords.filter(k=>k).join(', ') || "None set"}</span>
                                        </div>
                                        <div><span className="font-bold text-gray-600 block text-xs uppercase">Long-tail Keywords</span> <span className="text-gray-700 font-mono">{productData.longTailKeywords || "(Click Auto-Generate)"}</span></div>
                                    </div>
                                </div>
                                
                                <div className="grid grid-cols-1 gap-4">
                                    <TextArea 
                                        label="Product USP / Hook" 
                                        name="usp" 
                                        value={productData.usp} 
                                        onChange={handleProductChange} 
                                        placeholder="e.g. The only waterproof travel bag with a lifetime warranty." 
                                    />
                                    <TextArea 
                                        label="Additional Information" 
                                        name="additionalInfo" 
                                        value={productData.additionalInfo} 
                                        onChange={handleProductChange} 
                                        placeholder="Any extra details for the content..." 
                                    />
                                </div>
                                
                                {/* INTERNAL LINKS */}
                                <div>
                                    <div className="flex justify-between items-center mb-2">
                                        <h3 className="text-sm font-bold text-gray-900">Internal Linking Strategy</h3>
                                        <button onClick={addInternalLink} className="text-xs flex items-center gap-1 text-blue-600 font-bold"><Plus size={12}/> Add Link</button>
                                    </div>
                                    <div className="space-y-2 bg-gray-50 p-3 rounded border">
                                        {contentData.internalLinks.map((link, idx) => (
                                            <div key={idx} className="flex gap-2 items-center">
                                                <input placeholder="Blog Title / Anchor Text" className="flex-1 p-2 border rounded text-xs" value={link.title} onChange={(e) => updateInternalLink(idx, 'title', e.target.value)} />
                                                <input placeholder="/blog/url-slug" className="flex-1 p-2 border rounded text-xs" value={link.url} onChange={(e) => updateInternalLink(idx, 'url', e.target.value)} />
                                                <button onClick={() => removeInternalLink(idx)} className="text-red-400 hover:text-red-600"><Trash size={14}/></button>
                                            </div>
                                        ))}
                                        {contentData.internalLinks.length === 0 && <p className="text-xs text-gray-400 italic">No internal links added.</p>}
                                    </div>
                                </div>

                                {/* NEW: EXTERNAL AUTHORITY LINKS SECTION */}
                                <div className="mt-4">
                                    <div className="flex justify-between items-center mb-2">
                                        <h3 className="text-sm font-bold text-gray-900">External Authority Links</h3>
                                        <button onClick={addExternalLink} className="text-xs flex items-center gap-1 text-blue-600 font-bold"><Plus size={12}/> Add Link</button>
                                    </div>
                                    <div className="space-y-2 bg-gray-50 p-3 rounded border">
                                        {contentData.externalLinks.map((link, idx) => (
                                            <div key={idx} className="flex gap-2 items-center">
                                                <input placeholder="Authority Title (e.g. Wikipedia USB)" className="flex-1 p-2 border rounded text-xs" value={link.title} onChange={(e) => updateExternalLink(idx, 'title', e.target.value)} />
                                                <input placeholder="https://external-authority.com/page" className="flex-1 p-2 border rounded text-xs" value={link.url} onChange={(e) => updateExternalLink(idx, 'url', e.target.value)} />
                                                <button onClick={() => removeExternalLink(idx)} className="text-red-400 hover:text-red-600"><Trash size={14}/></button>
                                            </div>
                                        ))}
                                        {contentData.externalLinks.length === 0 && <p className="text-xs text-gray-400 italic">No external links added.</p>}
                                    </div>
                                    <p className="text-xs text-gray-400 mt-1">Link only to non-competitor authority sources (e.g., Industry Standards, Educational Wikis) related to your product.</p>
                                </div>

                                <div className="border-t pt-6">
                                    <h3 className="text-lg font-bold text-gray-800 mb-2">Product Description Generator (HTML + Schema)</h3>
                                    <div className="flex gap-2">
                                        <button onClick={() => setContentData({...contentData, generated: true})} className="bg-blue-600 text-white px-6 py-3 rounded-lg font-bold shadow-sm flex items-center gap-2 hover:bg-blue-700 w-full justify-center">
                                            <Zap size={18}/> Generate Optimized Content
                                        </button>
                                    </div>
                                    {contentData.generated && (
                                        <div className="mt-4 border rounded-lg overflow-hidden animate-fade-in">
                                            <div className="bg-gray-100 px-4 py-2 border-b text-xs font-bold text-gray-500 flex justify-between"><span>PREVIEW</span><CopyButton text={generateHTML()} /></div>
                                            <div className="p-4 bg-gray-50 h-64 overflow-y-auto font-mono text-xs text-gray-700 whitespace-pre-wrap">{generateHTML()}{'\n\n'}{generateJSONLD()}</div>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    );
                    case 6: 
                        return (
                        <div className="w-full h-full flex flex-col bg-white p-6 overflow-y-auto">
                            <div className="flex justify-between items-center mb-6 flex-wrap gap-4">
                                <h2 className="text-2xl font-bold text-gray-800 flex items-center gap-2"><Code className="text-blue-600"/> Optimized SEO & GEO Assets</h2>
                                <div className="flex gap-2">
                                    <button 
                                        onClick={resetProject}
                                        className="bg-white border border-gray-300 text-gray-600 hover:bg-red-50 hover:text-red-600 hover:border-red-200 px-4 py-2.5 rounded-lg font-bold flex items-center gap-2 transition-colors"
                                        title="Start New Project"
                                    >
                                        <RotateCcw size={16} /> New
                                    </button>
                                    <button 
                                        onClick={exportData}
                                        className="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2.5 rounded-lg font-bold flex items-center gap-2 transition-colors"
                                        title="Download JSON"
                                    >
                                        <ExternalLink size={16} /> Export
                                    </button>
                                    <button 
                                        onClick={submitProject}
                                        className="bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg font-bold flex items-center gap-2 shadow-sm transition-colors"
                                        title="Submit Project"
                                    >
                                        <Send size={16} /> Submit
                                    </button>
                                    <button 
                                        onClick={generateSEOOutputs}
                                        className="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2.5 rounded-lg font-bold flex items-center gap-2 shadow-lg transition-all transform hover:scale-105"
                                    >
                                        <Zap size={18} /> Generate Now
                                    </button>
                                </div>
                            </div>
                            
                            {!generatedAssets ? (
                                <div className="flex-1 flex flex-col items-center justify-center text-center p-12 border-2 border-dashed border-gray-200 rounded-xl bg-gray-50">
                                    <div className="bg-blue-100 p-4 rounded-full mb-4">
                                        <Brain size={32} className="text-blue-500" />
                                    </div>
                                    <h3 className="text-lg font-bold text-gray-700 mb-2">Ready to Generate</h3>
                                    <p className="text-gray-500 max-w-md">
                                        Click "Generate Now" to compile all data from Steps 1-5 into optimized SEO titles, meta tags, and schema structured data.
                                    </p>
                                </div>
                            ) : (
                                <div className="animate-fadeIn space-y-6">
                                    {/* 1. Product Title */}
                                    <div className="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                        <div className="flex justify-between items-center mb-2">
                                            <h3 className="text-sm font-bold text-gray-700 uppercase">1. Product Title</h3>
                                            <CopyButton text={generatedAssets.productTitle} />
                                        </div>
                                        <div className="p-3 bg-white border rounded text-sm text-gray-800 font-mono break-words">{generatedAssets.productTitle}</div>
                                        <p className="text-xs text-gray-400 mt-1">Optimized for search intent &amp; visibility.</p>
                                    </div>

                                    {/* 2. Related Blog Title */}
                                    <div className="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                        <div className="flex justify-between items-center mb-2">
                                            <h3 className="text-sm font-bold text-gray-700 uppercase">2. Related Blog Title</h3>
                                            <CopyButton text={generatedAssets.blogTitle} />
                                        </div>
                                        <div className="p-3 bg-white border rounded text-sm text-gray-800 font-mono break-words">{generatedAssets.blogTitle}</div>
                                    </div>

                                    {/* 3. Related Blog URL */}
                                    <div className="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                        <div className="flex justify-between items-center mb-2">
                                            <h3 className="text-sm font-bold text-gray-700 uppercase">3. Related Blog URL</h3>
                                            <CopyButton text={generatedAssets.blogUrl} />
                                        </div>
                                        <div className="p-3 bg-white border rounded text-sm text-gray-800 font-mono break-words">{generatedAssets.blogUrl}</div>
                                    </div>

                                    {/* 4. FAQs JSON */}
                                    <div className="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                        <div className="flex justify-between items-center mb-2">
                                            <h3 className="text-sm font-bold text-gray-700 uppercase">4. FAQs JSON</h3>
                                            <CopyButton text={generatedAssets.faqsJson} />
                                        </div>
                                        <textarea className="w-full p-3 bg-white border rounded text-xs font-mono text-gray-600 h-48" readOnly value={generatedAssets.faqsJson}></textarea>
                                        <p className="text-xs text-gray-400 mt-1">Raw JSON array format for integration.</p>
                                    </div>

                                    {/* 5. Meta Title */}
                                    <div className="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                        <div className="flex justify-between items-center mb-2">
                                            <h3 className="text-sm font-bold text-gray-700 uppercase">5. Meta Title</h3>
                                            <div className={`text-xs font-bold ${generatedAssets.metaTitle.length > 60 ? 'text-red-500' : 'text-green-500'}`}>
                                                {generatedAssets.metaTitle.length} / 60 chars
                                            </div>
                                            <CopyButton text={generatedAssets.metaTitle} />
                                        </div>
                                        <div className="p-3 bg-white border rounded text-sm text-gray-800 font-mono break-words">{generatedAssets.metaTitle}</div>
                                        <p className="text-xs text-gray-400 mt-1">Ideal length: ~60 chars.</p>
                                    </div>

                                    {/* 6. Meta Description */}
                                    <div className="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                        <div className="flex justify-between items-center mb-2">
                                            <h3 className="text-sm font-bold text-gray-700 uppercase">6. Meta Description</h3>
                                            <div className={`text-xs font-bold ${generatedAssets.metaDesc.length > 160 ? 'text-red-500' : 'text-green-500'}`}>
                                                {generatedAssets.metaDesc.length} / 160 chars
                                            </div>
                                            <CopyButton text={generatedAssets.metaDesc} />
                                        </div>
                                        <div className="p-3 bg-white border rounded text-sm text-gray-800 font-mono break-words">{generatedAssets.metaDesc}</div>
                                        <p className="text-xs text-gray-400 mt-1">Ideal length: ~160 chars. Includes USP & CTA.</p>
                                    </div>

                                    {/* 7. Product URL */}
                                    <div className="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                        <div className="flex justify-between items-center mb-2">
                                            <h3 className="text-sm font-bold text-gray-700 uppercase">7. Product URL</h3>
                                            <CopyButton text={generatedAssets.productUrl} />
                                        </div>
                                        <div className="p-3 bg-white border rounded text-sm text-gray-800 font-mono break-words">{generatedAssets.productUrl}</div>
                                    </div>
                                </div>
                            )}
                        </div>
                    );
                    default: return null;
                }
            };

            const steps = [
                { num: 1, label: "Organization Governance", icon: Building },
                { num: 2, label: "Global Market Strategy", icon: Globe },
                { num: 3, label: "Engineering Specs", icon: Wrench },
                { num: 4, label: "Product Intelligence", icon: Zap },
                { num: 5, label: "Content Engine", icon: PenTool },
                { num: 6, label: "Optimized Asset Generation", icon: Code }
            ];

            return (
                <div className="flex h-full flex-col md:flex-row">
                    <div className="w-full md:w-72 bg-gray-900 flex flex-col border-r border-gray-800 shrink-0">
                        <div className="p-6 border-b border-gray-800">
                            <h1 className="text-white font-bold text-xl tracking-tight flex items-center gap-2"><Zap className="text-blue-500" /> Dynamic</h1>
                            <p className="text-gray-500 text-xs mt-1 uppercase tracking-widest">SEO & GEO Architect</p>
                        </div>
                        <div className="p-4 space-y-2 overflow-y-auto flex-1">
                            {steps.map(s => <SidebarStep key={s.num} stepNumber={s.num} label={s.label} icon={s.icon} current={currentStep} onClick={setCurrentStep} />)}
                        </div>
                        {/* RESET BUTTON */}
                        <div className="p-4 border-t border-gray-800">
                             <button 
                                onClick={resetProject}
                                className="w-full flex items-center justify-center gap-2 text-gray-400 hover:text-white text-xs uppercase tracking-wider py-2 hover:bg-gray-800 rounded transition-colors"
                             >
                                <RotateCcw size={14} /> Reset Project
                             </button>
                        </div>
                    </div>
                    <div className="flex-1 flex flex-col overflow-hidden bg-gray-50">
                        <div className="px-6 pt-4 pb-2 bg-white border-b border-gray-100">
                            <div className="flex justify-between items-center mb-2">
                                <span className="text-xs font-bold text-gray-400 uppercase tracking-wider">Progress</span>
                                <span className="text-xs font-bold text-blue-600">{Math.round((currentStep / 6) * 100)}%</span>
                            </div>
                            <ProgressBar step={currentStep} />
                        </div>
                        {renderStepContent()}
                        <div className="p-4 border-t border-gray-200 bg-white flex justify-end">
                            {currentStep < 6 && <button onClick={handleNextStep} className="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors shadow-sm">Next Step <ArrowRight size={16} /></button>}
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
